{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\timewatch-clone\\\\client\\\\src\\\\pages\\\\Dashboard.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// client/src/pages/Dashboard.js\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { api } from '../api';\nimport Toast from '../components/Toast';\nimport Modal from '../components/Modal';\nimport jsPDF from 'jspdf';\nimport 'jspdf-autotable';\nimport * as XLSX from 'xlsx';\n\n/* ========== Utils ========== */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction fmtMin(n) {\n  if (n == null || isNaN(n)) return '-';\n  const h = Math.floor(n / 60);\n  const m = Math.round(n % 60);\n  return `${h}ש ${m}ד`;\n}\nfunction todayISO() {\n  const d = new Date();\n  const off = d.getTimezoneOffset();\n  const z = new Date(d.getTime() - off * 60000);\n  return z.toISOString().slice(0, 10);\n}\n// getGeo: tries to resolve coords fast; returns null if blocked.\nasync function getGeo() {\n  if (!('geolocation' in navigator)) return null;\n  return new Promise(resolve => {\n    navigator.geolocation.getCurrentPosition(pos => resolve({\n      lat: pos.coords.latitude,\n      lng: pos.coords.longitude\n    }), () => resolve(null), {\n      enableHighAccuracy: false,\n      timeout: 3000,\n      maximumAge: 60000\n    });\n  });\n}\nfunction fileDateStamp(d = new Date()) {\n  const pad = n => String(n).padStart(2, '0');\n  return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}`;\n}\n\n/* ========== Component ========== */\nexport default function Dashboard() {\n  _s();\n  var _today$breaks;\n  const [me, setMe] = useState(null);\n\n  // Today panel\n  const [today, setToday] = useState(null);\n  const [loadingToday, setLoadingToday] = useState(true);\n\n  // Report (right panel)\n  const [from, setFrom] = useState(todayISO());\n  const [to, setTo] = useState(todayISO());\n  const [userId, setUserId] = useState(''); // for admins; empty = self/all per API\n  const [rows, setRows] = useState([]);\n  const [loadingReport, setLoadingReport] = useState(false);\n\n  // UI\n  const [msg, setMsg] = useState(null);\n  const [err, setErr] = useState(null);\n  const [confirm, setConfirm] = useState(null); // {title, body, onConfirm}\n\n  // Dark mode\n  const [dark, setDark] = useState(() => {\n    try {\n      const saved = localStorage.getItem('tw_dark');\n      return saved ? saved === '1' : false;\n    } catch {\n      return false;\n    }\n  });\n  useEffect(() => {\n    const el = document.documentElement;\n    if (dark) el.classList.add('dark');else el.classList.remove('dark');\n    try {\n      localStorage.setItem('tw_dark', dark ? '1' : '0');\n    } catch {}\n  }, [dark]);\n\n  /* ===== Load profile (me) ===== */\n  useEffect(() => {\n    let stop = false;\n    (async () => {\n      try {\n        const data = await api('/api/auth/me');\n        if (!stop) setMe(data);\n      } catch (e) {\n        console.error(e);\n      }\n    })();\n    return () => {\n      stop = true;\n    };\n  }, []);\n\n  /* ===== Load today & report ===== */\n  async function refreshToday() {\n    setLoadingToday(true);\n    try {\n      const t = todayISO();\n      const res = await api(`/api/attendance/report?from=${t}&to=${t}`);\n      const mine = Array.isArray(res) && res.length ? res[0] : null;\n      setToday(mine || null);\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setLoadingToday(false);\n    }\n  }\n  async function refreshReport() {\n    setLoadingReport(true);\n    try {\n      const qs = new URLSearchParams({\n        from,\n        to\n      });\n      if (userId) qs.set('userId', userId);\n      const data = await api(`/api/attendance/report?${qs.toString()}`);\n      setRows(Array.isArray(data) ? data : []);\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setLoadingReport(false);\n    }\n  }\n  useEffect(() => {\n    refreshToday();\n  }, []);\n  useEffect(() => {\n    refreshReport();\n  }, [from, to, userId]);\n\n  /* ===== Derived ===== */\n  const hasOpenShift = !!(today && today.clockIn && !today.clockOut);\n  const onBreak = useMemo(() => {\n    if (!today || !today.breaks) return false;\n    const last = today.breaks[today.breaks.length - 1];\n    return !!(last && last.start && !last.end);\n  }, [today]);\n\n  // Live timer (net working minutes)\n  const liveMinutes = useLiveMinutes(today);\n\n  /* ===== Actions: attendance ===== */\n  async function doClockIn() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? {\n        coords\n      } : undefined;\n      await api('/api/attendance/clockin', {\n        method: 'POST',\n        body: JSON.stringify(body)\n      });\n      setMsg({\n        type: 'success',\n        title: 'Clock In בוצע',\n        message: ''\n      });\n      await refreshToday();\n      await refreshReport();\n    } catch (e) {\n      setMsg({\n        type: 'error',\n        title: 'שגיאה',\n        message: e.message\n      });\n    }\n  }\n  async function doClockOut() {\n    if (onBreak) {\n      setConfirm({\n        title: 'סגירת משמרת בזמן הפסקה',\n        body: 'יש לך הפסקה פתוחה. לסגור את ההפסקה ולבצע Clock Out?',\n        onConfirm: async () => {\n          try {\n            await api('/api/attendance/break/end', {\n              method: 'POST'\n            });\n          } catch {}\n          await reallyClockOut();\n        }\n      });\n      return;\n    }\n    await reallyClockOut();\n  }\n  async function reallyClockOut() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? {\n        coords\n      } : undefined;\n      await api('/api/attendance/clockout', {\n        method: 'POST',\n        body: JSON.stringify(body)\n      });\n      setMsg({\n        type: 'success',\n        title: 'Clock Out בוצע',\n        message: ''\n      });\n      await refreshToday();\n      await refreshReport();\n    } catch (e) {\n      setMsg({\n        type: 'error',\n        title: 'שגיאה',\n        message: e.message\n      });\n    }\n  }\n  async function startBreak() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? {\n        coords\n      } : undefined;\n      await api('/api/attendance/break/start', {\n        method: 'POST',\n        body: JSON.stringify(body)\n      });\n      setMsg({\n        type: 'success',\n        title: 'הפסקה התחילה',\n        message: ''\n      });\n      await refreshToday();\n      await refreshReport();\n    } catch (e) {\n      setMsg({\n        type: 'error',\n        title: 'שגיאה',\n        message: e.message\n      });\n    }\n  }\n  async function endBreak() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? {\n        coords\n      } : undefined;\n      await api('/api/attendance/break/end', {\n        method: 'POST',\n        body: JSON.stringify(body)\n      });\n      setMsg({\n        type: 'success',\n        title: 'הפסקה הסתיימה',\n        message: ''\n      });\n      await refreshToday();\n      await refreshReport();\n    } catch (e) {\n      setMsg({\n        type: 'error',\n        title: 'שגיאה',\n        message: e.message\n      });\n    }\n  }\n\n  /* ===== Report totals ===== */\n  const totals = useMemo(() => {\n    const sum = key => rows.reduce((a, r) => a + (Number(r[key]) || 0), 0);\n    return {\n      regularMinutes: sum('regularMinutes'),\n      overtimeMinutes: sum('overtimeMinutes'),\n      totalMinutes: sum('totalMinutes')\n    };\n  }, [rows]);\n\n  /* ===== Exports (CSV/XLSX/PDF) ===== */\n  function exportCSV() {\n    const header = ['date', 'clockIn', 'clockOut', 'regularMinutes', 'overtimeMinutes', 'totalMinutes'];\n    const lines = [header.join(',')].concat(rows.map(r => {\n      var _r$regularMinutes, _r$overtimeMinutes, _r$totalMinutes;\n      return [r.date, r.clockIn ? new Date(r.clockIn).toLocaleString() : '', r.clockOut ? new Date(r.clockOut).toLocaleString() : '', (_r$regularMinutes = r.regularMinutes) !== null && _r$regularMinutes !== void 0 ? _r$regularMinutes : '', (_r$overtimeMinutes = r.overtimeMinutes) !== null && _r$overtimeMinutes !== void 0 ? _r$overtimeMinutes : '', (_r$totalMinutes = r.totalMinutes) !== null && _r$totalMinutes !== void 0 ? _r$totalMinutes : ''].join(',');\n    }));\n    const blob = new Blob([lines.join('\\n')], {\n      type: 'text/csv;charset=utf-8'\n    });\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    const who = userId ? `user-${userId}` : (me === null || me === void 0 ? void 0 : me.name) || 'me';\n    a.download = `Costoro-${who}-${from}_to_${to}.csv`;\n    a.click();\n  }\n  function exportExcel() {\n    const rows2 = rows.map(r => ({\n      Date: r.date,\n      ClockIn: r.clockIn ? new Date(r.clockIn).toLocaleString() : '',\n      ClockOut: r.clockOut ? new Date(r.clockOut).toLocaleString() : '',\n      RegularMinutes: r.regularMinutes || 0,\n      OvertimeMinutes: r.overtimeMinutes || 0,\n      TotalMinutes: r.totalMinutes || 0\n    }));\n    const wb = XLSX.utils.book_new();\n    const ws = XLSX.utils.json_to_sheet(rows2);\n    XLSX.utils.book_append_sheet(wb, ws, 'Report');\n    const who = userId ? `user-${userId}` : (me === null || me === void 0 ? void 0 : me.name) || 'me';\n    XLSX.writeFile(wb, `Costoro-${who}-${from}_to_${to}.xlsx`);\n  }\n  async function exportPDF() {\n    const doc = new jsPDF('p', 'pt');\n    const marginX = 36;\n    const marginY = 28;\n    const lineY = 64;\n\n    // Header\n    doc.setFontSize(16);\n    doc.text('Costoro - Attendance Report', marginX, 30);\n    doc.setFontSize(11);\n    const who = userId ? `User: ${userId}` : me !== null && me !== void 0 && me.name ? `User: ${me.name}` : 'User: Me';\n    doc.text(`${who}    Range: ${from} → ${to}`, marginX, 46);\n    doc.setLineWidth(0.5);\n    doc.line(marginX, lineY, 559, lineY);\n\n    // Optional logo (if exists under /logo.png)\n    try {\n      const img = await loadImage('/logo.png');\n      const cnv = document.createElement('canvas');\n      cnv.width = img.width;\n      cnv.height = img.height;\n      const ctx = cnv.getContext('2d');\n      ctx.drawImage(img, 0, 0);\n      const base64 = cnv.toDataURL('image/png');\n      doc.addImage(base64, 'PNG', 500, 16, 56, 56);\n    } catch {}\n\n    // Table\n    const body = rows.map(r => [r.date, r.clockIn ? new Date(r.clockIn).toLocaleString() : '-', r.clockOut ? new Date(r.clockOut).toLocaleString() : '-', fmtMin(r.regularMinutes || 0), fmtMin(r.overtimeMinutes || 0), fmtMin(r.totalMinutes || 0)]);\n    doc.autoTable({\n      startY: lineY + 16,\n      head: [['תאריך', 'Clock In', 'Clock Out', 'רגיל', 'נוספות', 'סה״כ']],\n      body,\n      styles: {\n        font: 'helvetica',\n        fontSize: 10\n      },\n      headStyles: {\n        fillColor: [20, 20, 20],\n        textColor: [255, 255, 255]\n      },\n      margin: {\n        left: marginX,\n        right: marginX\n      }\n    });\n\n    // Footer sum\n    const finalY = doc.lastAutoTable.finalY || lineY + 16;\n    doc.setFontSize(11);\n    doc.text(`Totals: רגיל ${fmtMin(totals.regularMinutes)}, נוספות ${fmtMin(totals.overtimeMinutes)}, סה״כ ${fmtMin(totals.totalMinutes)}`, marginX, finalY + 24);\n    doc.save(`Costoro-${(me === null || me === void 0 ? void 0 : me.name) || 'me'}-${fileDateStamp()}.pdf`);\n  }\n\n  /* ===== Presets ===== */\n  function setPreset(kind) {\n    const d = new Date();\n    const toLocalISO = x => {\n      const off = x.getTimezoneOffset();\n      const z = new Date(x.getTime() - off * 60000);\n      return z.toISOString().slice(0, 10);\n    };\n    if (kind === 'today') {\n      const t = toLocalISO(new Date());\n      setFrom(t);\n      setTo(t);\n    } else if (kind === 'yesterday') {\n      const y = new Date(d);\n      y.setDate(d.getDate() - 1);\n      const t = toLocalISO(y);\n      setFrom(t);\n      setTo(t);\n    } else if (kind === 'week') {\n      const day = d.getDay(); // 0..6\n      const monday = new Date(d);\n      const sunday = new Date(d);\n      monday.setDate(d.getDate() - (day + 6) % 7);\n      sunday.setDate(monday.getDate() + 6);\n      setFrom(toLocalISO(monday));\n      setTo(toLocalISO(sunday));\n    } else if (kind === 'month') {\n      const first = new Date(d.getFullYear(), d.getMonth(), 1);\n      const last = new Date(d.getFullYear(), d.getMonth() + 1, 0);\n      setFrom(toLocalISO(first));\n      setTo(toLocalISO(last));\n    }\n  }\n\n  /* ===== Logout ===== */\n  function logout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    localStorage.removeItem('auth');\n    window.location.href = '/login';\n  }\n\n  /* ===== Render ===== */\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100\",\n    children: [/*#__PURE__*/_jsxDEV(Toast, {\n      ...(msg || {}),\n      onClose: () => setMsg(null),\n      show: !!msg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 7\n    }, this), confirm && /*#__PURE__*/_jsxDEV(Modal, {\n      title: confirm.title,\n      onClose: () => setConfirm(null),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4 text-right\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: confirm.body\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2 justify-end\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            onClick: () => {\n              var _confirm$onConfirm;\n              setConfirm(null);\n              (_confirm$onConfirm = confirm.onConfirm) === null || _confirm$onConfirm === void 0 ? void 0 : _confirm$onConfirm.call(confirm);\n            },\n            children: \"\\u05D0\\u05D9\\u05E9\\u05D5\\u05E8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn--gray\",\n            onClick: () => setConfirm(null),\n            children: \"\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"flex items-center justify-between p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn--light\",\n          onClick: () => window.location.reload(),\n          children: \"\\u05D8\\u05E2\\u05DF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-3 py-1 rounded-full bg-black text-white text-sm\",\n          children: [\" \", new Date().toLocaleTimeString(), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn--light\",\n          onClick: () => setDark(v => !v),\n          children: dark ? 'מצב בהיר' : 'מצב כהה'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn--light\",\n          onClick: () => window.open('/kiosk', '_blank'),\n          children: \"\\u05E2\\u05DE\\u05D3\\u05EA \\u05E1\\u05E8\\u05D9\\u05E7\\u05D4 (QR)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this), (me === null || me === void 0 ? void 0 : me.role) === 'admin' && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn--light\",\n          onClick: () => window.location.href = '/admin/users',\n          children: \"\\u05E0\\u05D9\\u05D4\\u05D5\\u05DC \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9\\u05D9\\u05DD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-right\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-semibold\",\n            children: [\"\\u05E9\\u05DC\\u05D5\\u05DD \", (me === null || me === void 0 ? void 0 : me.name) || '...']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs opacity-70\",\n            children: (me === null || me === void 0 ? void 0 : me.email) || ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/logo.png\",\n          alt: \"Logo\",\n          className: \"w-8 h-8 rounded-md\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"grid grid-cols-1 lg:grid-cols-2 gap-6 px-4 pb-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white dark:bg-slate-800 rounded-2xl shadow p-5 min-h-[360px]\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-bold\",\n            children: \"\\u05D4\\u05D9\\u05D5\\u05DD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm opacity-70\",\n            children: today ? today.date : todayISO()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap gap-2 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            disabled: hasOpenShift,\n            onClick: doClockIn,\n            children: \"Clock In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn--gray\",\n            disabled: !hasOpenShift || onBreak,\n            onClick: startBreak,\n            children: \"Start Break\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn--gray\",\n            disabled: !onBreak,\n            onClick: endBreak,\n            children: \"End Break\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn--gray\",\n            disabled: !hasOpenShift,\n            onClick: doClockOut,\n            children: \"Clock Out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 11\n        }, this), loadingToday ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-pulse h-40 rounded-xl bg-slate-100 dark:bg-slate-700\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 13\n        }, this) : !today ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"opacity-70\",\n          children: \"\\u05DC\\u05D0 \\u05D1\\u05DE\\u05E9\\u05DE\\u05E8\\u05EA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: \"Clock In:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 22\n              }, this), \" \", today.clockIn ? new Date(today.clockIn).toLocaleTimeString() : '-']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: \"Clock Out:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 22\n              }, this), \" \", today.clockOut ? new Date(today.clockOut).toLocaleTimeString() : '-']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: \"\\u05E1\\u05D4\\u05F4\\u05DB (\\u05D7\\u05D9):\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 22\n              }, this), \" \", fmtMin(liveMinutes)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: \"\\u05E8\\u05D2\\u05D9\\u05DC:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 390,\n                columnNumber: 22\n              }, this), \" \", fmtMin(today.regularMinutes || 0)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: \"\\u05E0\\u05D5\\u05E1\\u05E4\\u05D5\\u05EA:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 22\n              }, this), \" \", fmtMin(today.overtimeMinutes || 0)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-semibold mb-1\",\n              children: \"\\u05D4\\u05E4\\u05E1\\u05E7\\u05D5\\u05EA:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-disc pr-5 space-y-1\",\n              children: [(today.breaks || []).map((b, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [b.start ? new Date(b.start).toLocaleTimeString() : '-', \" \\u2192 \", b.end ? new Date(b.end).toLocaleTimeString() : '—']\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 21\n              }, this)), !((_today$breaks = today.breaks) !== null && _today$breaks !== void 0 && _today$breaks.length) && /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"opacity-60\",\n                children: \"\\u2014\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white dark:bg-slate-800 rounded-2xl shadow p-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap items-center justify-between gap-2 mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-bold\",\n            children: \"\\u05D3\\u05D5\\u05D7 \\u05DC\\u05E4\\u05D9 \\u05EA\\u05D0\\u05E8\\u05D9\\u05DB\\u05D9\\u05DD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"link\",\n              onClick: exportPDF,\n              children: \"PDF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"link\",\n              onClick: exportExcel,\n              children: \"Excel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"link\",\n              onClick: exportCSV,\n              children: \"CSV\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap items-center gap-2 mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"btn-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn--light\",\n              onClick: () => setPreset('today'),\n              children: \"\\u05D4\\u05D9\\u05D5\\u05DD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn--light\",\n              onClick: () => setPreset('yesterday'),\n              children: \"\\u05D0\\u05EA\\u05DE\\u05D5\\u05DC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn--light\",\n              onClick: () => setPreset('week'),\n              children: \"\\u05D4\\u05E9\\u05D1\\u05D5\\u05E2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn--light\",\n              onClick: () => setPreset('month'),\n              children: \"\\u05D4\\u05D7\\u05D5\\u05D3\\u05E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: from,\n            onChange: e => setFrom(e.target.value),\n            className: \"input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u05E2\\u05D3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: to,\n            onChange: e => setTo(e.target.value),\n            className: \"input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 13\n          }, this), (me === null || me === void 0 ? void 0 : me.role) === 'admin' && /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"input\",\n            value: userId,\n            onChange: e => setUserId(e.target.value),\n            children: /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u2014 \\u05DB\\u05DC\\u05D5\\u05DC/\\u05D4 \\u05D0\\u05EA \\u05E2\\u05E6\\u05DE\\u05D9 \\u2014\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-auto max-h-[500px] rounded-xl border border-slate-200 dark:border-slate-700\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"w-full text-right text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"sticky top-0 bg-slate-100 dark:bg-slate-700\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th\",\n                  children: \"\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 444,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th\",\n                  children: \"Clock In\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 445,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th\",\n                  children: \"Clock Out\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 446,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th\",\n                  children: \"\\u05E8\\u05D2\\u05D9\\u05DC\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th\",\n                  children: \"\\u05E0\\u05D5\\u05E1\\u05E4\\u05D5\\u05EA\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th\",\n                  children: \"\\u05E1\\u05F4\\u05DB\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"th\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: loadingReport ? Array.from({\n                length: 6\n              }).map((_, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: /*#__PURE__*/_jsxDEV(\"td\", {\n                  colSpan: \"7\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"animate-pulse h-9 bg-slate-100 dark:bg-slate-700\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 458,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 457,\n                  columnNumber: 23\n                }, this)\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 456,\n                columnNumber: 21\n              }, this)) : rows.map(r => /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"odd:bg-white even:bg-slate-50 dark:odd:bg-slate-800 dark:even:bg-slate-700\",\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td\",\n                  children: r.date\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 465,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td\",\n                  children: r.clockIn ? new Date(r.clockIn).toLocaleTimeString() : '-'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 466,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td\",\n                  children: r.clockOut ? new Date(r.clockOut).toLocaleTimeString() : '-'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 467,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td\",\n                  children: fmtMin(r.regularMinutes || 0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td\",\n                  children: fmtMin(r.overtimeMinutes || 0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td\",\n                  children: fmtMin(r.totalMinutes || 0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn--tiny\",\n                    disabled: true,\n                    children: \"\\u05E2\\u05E8\\u05D5\\u05DA\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 472,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 23\n                }, this)]\n              }, r._id || r.date, true, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 15\n            }, this), !loadingReport && /*#__PURE__*/_jsxDEV(\"tfoot\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"bg-slate-100 dark:bg-slate-700 font-semibold\",\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td\",\n                  children: \"\\u05E1\\u05D9\\u05DB\\u05D5\\u05DD\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 481,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 482,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td\",\n                  children: fmtMin(totals.regularMinutes)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 484,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td\",\n                  children: fmtMin(totals.overtimeMinutes)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 485,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td\",\n                  children: fmtMin(totals.totalMinutes)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"td\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 487,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"px-4 py-6 flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"opacity-70 text-sm\",\n        children: [\"\\xA9 \", new Date().getFullYear(), \" Costoro\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn--light\",\n        onClick: logout,\n        children: \"\\u05D4\\u05EA\\u05E0\\u05EA\\u05E7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 496,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        .btn{background:black;color:white;border-radius:0.75rem;padding:0.5rem 1rem}\n        .btn--gray{background:#e5e7eb;color:#111827}\n        .btn--light{background:#f1f5f9;color:#111827}\n        .btn[disabled]{opacity:.4;cursor:not-allowed}\n        .btn-group .btn{margin-inline-end:0.25rem}\n        .btn--tiny{padding:0.25rem 0.5rem;border-radius:0.5rem;font-size:0.75rem}\n        .input{border:1px solid #cbd5e1;border-radius:0.75rem;padding:0.4rem 0.6rem;background:#f8fafc}\n        .link{cursor:pointer;text-decoration:underline}\n        .th{position:sticky; top:0; padding:0.5rem; text-align:right}\n        .td{padding:0.5rem}\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 329,\n    columnNumber: 5\n  }, this);\n}\n\n/* ===== Hooks ===== */\n_s(Dashboard, \"vtP+I9m/E02GcyMw2hI6KJOMwIY=\", false, function () {\n  return [useLiveMinutes];\n});\n_c = Dashboard;\nfunction useLiveMinutes(today) {\n  _s2();\n  const [min, setMin] = useState(0);\n  useEffect(() => {\n    function calc() {\n      if (!today || !today.clockIn) return setMin(0);\n      const start = new Date(today.clockIn).getTime();\n      let now = Date.now();\n      let workingMs = now - start;\n      const breaks = Array.isArray(today.breaks) ? today.breaks : [];\n      for (const b of breaks) {\n        const s = b.start ? new Date(b.start).getTime() : null;\n        const e = b.end ? new Date(b.end).getTime() : null;\n        if (s) {\n          if (e) workingMs -= Math.max(0, e - s);else workingMs -= Math.max(0, now - s); // open break\n        }\n      }\n      setMin(Math.max(0, Math.floor(workingMs / 60000)));\n    }\n    calc();\n    const t = setInterval(calc, 1000);\n    return () => clearInterval(t);\n  }, [today === null || today === void 0 ? void 0 : today.clockIn, JSON.stringify((today === null || today === void 0 ? void 0 : today.breaks) || [])]);\n  return min;\n}\n\n/* helper */\n_s2(useLiveMinutes, \"ngLVQ9bGP+CiLAyWkAZX8U2iXZI=\");\nfunction loadImage(src) {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n    img.src = src;\n  });\n}\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","api","Toast","Modal","jsPDF","XLSX","jsxDEV","_jsxDEV","fmtMin","n","isNaN","h","Math","floor","m","round","todayISO","d","Date","off","getTimezoneOffset","z","getTime","toISOString","slice","getGeo","navigator","Promise","resolve","geolocation","getCurrentPosition","pos","lat","coords","latitude","lng","longitude","enableHighAccuracy","timeout","maximumAge","fileDateStamp","pad","String","padStart","getFullYear","getMonth","getDate","Dashboard","_s","_today$breaks","me","setMe","today","setToday","loadingToday","setLoadingToday","from","setFrom","to","setTo","userId","setUserId","rows","setRows","loadingReport","setLoadingReport","msg","setMsg","err","setErr","confirm","setConfirm","dark","setDark","saved","localStorage","getItem","el","document","documentElement","classList","add","remove","setItem","stop","data","e","console","error","refreshToday","t","res","mine","Array","isArray","length","message","refreshReport","qs","URLSearchParams","set","toString","hasOpenShift","clockIn","clockOut","onBreak","breaks","last","start","end","liveMinutes","useLiveMinutes","doClockIn","body","undefined","method","JSON","stringify","type","title","doClockOut","onConfirm","reallyClockOut","startBreak","endBreak","totals","sum","key","reduce","a","r","Number","regularMinutes","overtimeMinutes","totalMinutes","exportCSV","header","lines","join","concat","map","_r$regularMinutes","_r$overtimeMinutes","_r$totalMinutes","date","toLocaleString","blob","Blob","createElement","href","URL","createObjectURL","who","name","download","click","exportExcel","rows2","ClockIn","ClockOut","RegularMinutes","OvertimeMinutes","TotalMinutes","wb","utils","book_new","ws","json_to_sheet","book_append_sheet","writeFile","exportPDF","doc","marginX","marginY","lineY","setFontSize","text","setLineWidth","line","img","loadImage","cnv","width","height","ctx","getContext","drawImage","base64","toDataURL","addImage","autoTable","startY","head","styles","font","fontSize","headStyles","fillColor","textColor","margin","left","right","finalY","lastAutoTable","save","setPreset","kind","toLocalISO","x","y","setDate","day","getDay","monday","sunday","first","logout","removeItem","window","location","className","children","onClose","show","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_confirm$onConfirm","call","reload","toLocaleTimeString","v","open","role","email","src","alt","disabled","b","i","value","onChange","target","_","colSpan","_id","_c","_s2","min","setMin","calc","now","workingMs","s","max","setInterval","clearInterval","reject","Image","onload","onerror","$RefreshReg$"],"sources":["C:/Users/user/Desktop/timewatch-clone/client/src/pages/Dashboard.js"],"sourcesContent":["// client/src/pages/Dashboard.js\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { api } from '../api';\nimport Toast from '../components/Toast';\nimport Modal from '../components/Modal';\nimport jsPDF from 'jspdf';\nimport 'jspdf-autotable';\nimport * as XLSX from 'xlsx';\n\n/* ========== Utils ========== */\nfunction fmtMin(n) {\n  if (n == null || isNaN(n)) return '-';\n  const h = Math.floor(n / 60);\n  const m = Math.round(n % 60);\n  return `${h}ש ${m}ד`;\n}\nfunction todayISO() {\n  const d = new Date();\n  const off = d.getTimezoneOffset();\n  const z = new Date(d.getTime() - off * 60000);\n  return z.toISOString().slice(0, 10);\n}\n// getGeo: tries to resolve coords fast; returns null if blocked.\nasync function getGeo() {\n  if (!('geolocation' in navigator)) return null;\n  return new Promise((resolve) => {\n    navigator.geolocation.getCurrentPosition(\n      (pos) => resolve({ lat: pos.coords.latitude, lng: pos.coords.longitude }),\n      () => resolve(null),\n      { enableHighAccuracy: false, timeout: 3000, maximumAge: 60000 }\n    );\n  });\n}\nfunction fileDateStamp(d = new Date()) {\n  const pad = (n) => String(n).padStart(2, '0');\n  return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}`;\n}\n\n/* ========== Component ========== */\nexport default function Dashboard() {\n  const [me, setMe] = useState(null);\n\n  // Today panel\n  const [today, setToday] = useState(null);\n  const [loadingToday, setLoadingToday] = useState(true);\n\n  // Report (right panel)\n  const [from, setFrom] = useState(todayISO());\n  const [to, setTo] = useState(todayISO());\n  const [userId, setUserId] = useState(''); // for admins; empty = self/all per API\n  const [rows, setRows] = useState([]);\n  const [loadingReport, setLoadingReport] = useState(false);\n\n  // UI\n  const [msg, setMsg] = useState(null);\n  const [err, setErr] = useState(null);\n  const [confirm, setConfirm] = useState(null); // {title, body, onConfirm}\n\n  // Dark mode\n  const [dark, setDark] = useState(() => {\n    try {\n      const saved = localStorage.getItem('tw_dark');\n      return saved ? saved === '1' : false;\n    } catch { return false; }\n  });\n  useEffect(() => {\n    const el = document.documentElement;\n    if (dark) el.classList.add('dark'); else el.classList.remove('dark');\n    try { localStorage.setItem('tw_dark', dark ? '1' : '0'); } catch {}\n  }, [dark]);\n\n  /* ===== Load profile (me) ===== */\n  useEffect(() => {\n    let stop = false;\n    (async () => {\n      try {\n        const data = await api('/api/auth/me');\n        if (!stop) setMe(data);\n      } catch (e) {\n        console.error(e);\n      }\n    })();\n    return () => { stop = true; };\n  }, []);\n\n  /* ===== Load today & report ===== */\n  async function refreshToday() {\n    setLoadingToday(true);\n    try {\n      const t = todayISO();\n      const res = await api(`/api/attendance/report?from=${t}&to=${t}`);\n      const mine = Array.isArray(res) && res.length ? res[0] : null;\n      setToday(mine || null);\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setLoadingToday(false);\n    }\n  }\n  async function refreshReport() {\n    setLoadingReport(true);\n    try {\n      const qs = new URLSearchParams({ from, to });\n      if (userId) qs.set('userId', userId);\n      const data = await api(`/api/attendance/report?${qs.toString()}`);\n      setRows(Array.isArray(data) ? data : []);\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setLoadingReport(false);\n    }\n  }\n  useEffect(() => { refreshToday(); }, []);\n  useEffect(() => { refreshReport(); }, [from, to, userId]);\n\n  /* ===== Derived ===== */\n  const hasOpenShift = !!(today && today.clockIn && !today.clockOut);\n  const onBreak = useMemo(() => {\n    if (!today || !today.breaks) return false;\n    const last = today.breaks[today.breaks.length - 1];\n    return !!(last && last.start && !last.end);\n  }, [today]);\n\n  // Live timer (net working minutes)\n  const liveMinutes = useLiveMinutes(today);\n\n  /* ===== Actions: attendance ===== */\n  async function doClockIn() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? { coords } : undefined;\n      await api('/api/attendance/clockin', { method: 'POST', body: JSON.stringify(body) });\n      setMsg({ type: 'success', title: 'Clock In בוצע', message: '' });\n      await refreshToday();\n      await refreshReport();\n    } catch (e) {\n      setMsg({ type: 'error', title: 'שגיאה', message: e.message });\n    }\n  }\n  async function doClockOut() {\n    if (onBreak) {\n      setConfirm({\n        title: 'סגירת משמרת בזמן הפסקה',\n        body: 'יש לך הפסקה פתוחה. לסגור את ההפסקה ולבצע Clock Out?',\n        onConfirm: async () => {\n          try { await api('/api/attendance/break/end', { method: 'POST' }); } catch {}\n          await reallyClockOut();\n        }\n      });\n      return;\n    }\n    await reallyClockOut();\n  }\n  async function reallyClockOut() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? { coords } : undefined;\n      await api('/api/attendance/clockout', { method: 'POST', body: JSON.stringify(body) });\n      setMsg({ type: 'success', title: 'Clock Out בוצע', message: '' });\n      await refreshToday();\n      await refreshReport();\n    } catch (e) {\n      setMsg({ type: 'error', title: 'שגיאה', message: e.message });\n    }\n  }\n  async function startBreak() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? { coords } : undefined;\n      await api('/api/attendance/break/start', { method: 'POST', body: JSON.stringify(body) });\n      setMsg({ type: 'success', title: 'הפסקה התחילה', message: '' });\n      await refreshToday();\n      await refreshReport();\n    } catch (e) {\n      setMsg({ type: 'error', title: 'שגיאה', message: e.message });\n    }\n  }\n  async function endBreak() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? { coords } : undefined;\n      await api('/api/attendance/break/end', { method: 'POST', body: JSON.stringify(body) });\n      setMsg({ type: 'success', title: 'הפסקה הסתיימה', message: '' });\n      await refreshToday();\n      await refreshReport();\n    } catch (e) {\n      setMsg({ type: 'error', title: 'שגיאה', message: e.message });\n    }\n  }\n\n  /* ===== Report totals ===== */\n  const totals = useMemo(() => {\n    const sum = (key) => rows.reduce((a, r) => a + (Number(r[key]) || 0), 0);\n    return {\n      regularMinutes: sum('regularMinutes'),\n      overtimeMinutes: sum('overtimeMinutes'),\n      totalMinutes: sum('totalMinutes')\n    };\n  }, [rows]);\n\n  /* ===== Exports (CSV/XLSX/PDF) ===== */\n  function exportCSV() {\n    const header = ['date', 'clockIn', 'clockOut', 'regularMinutes', 'overtimeMinutes', 'totalMinutes'];\n    const lines = [header.join(',')].concat(\n      rows.map(r => [\n        r.date,\n        r.clockIn ? new Date(r.clockIn).toLocaleString() : '',\n        r.clockOut ? new Date(r.clockOut).toLocaleString() : '',\n        r.regularMinutes ?? '',\n        r.overtimeMinutes ?? '',\n        r.totalMinutes ?? ''\n      ].join(','))\n    );\n    const blob = new Blob([lines.join('\\n')], { type: 'text/csv;charset=utf-8' });\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    const who = userId ? `user-${userId}` : (me?.name || 'me');\n    a.download = `Costoro-${who}-${from}_to_${to}.csv`;\n    a.click();\n  }\n  function exportExcel() {\n    const rows2 = rows.map(r => ({\n      Date: r.date,\n      ClockIn: r.clockIn ? new Date(r.clockIn).toLocaleString() : '',\n      ClockOut: r.clockOut ? new Date(r.clockOut).toLocaleString() : '',\n      RegularMinutes: r.regularMinutes || 0,\n      OvertimeMinutes: r.overtimeMinutes || 0,\n      TotalMinutes: r.totalMinutes || 0,\n    }));\n    const wb = XLSX.utils.book_new();\n    const ws = XLSX.utils.json_to_sheet(rows2);\n    XLSX.utils.book_append_sheet(wb, ws, 'Report');\n    const who = userId ? `user-${userId}` : (me?.name || 'me');\n    XLSX.writeFile(wb, `Costoro-${who}-${from}_to_${to}.xlsx`);\n  }\n  async function exportPDF() {\n    const doc = new jsPDF('p', 'pt');\n    const marginX = 36;\n    const marginY = 28;\n    const lineY = 64;\n\n    // Header\n    doc.setFontSize(16);\n    doc.text('Costoro - Attendance Report', marginX, 30);\n    doc.setFontSize(11);\n    const who = userId ? `User: ${userId}` : (me?.name ? `User: ${me.name}` : 'User: Me');\n    doc.text(`${who}    Range: ${from} → ${to}`, marginX, 46);\n    doc.setLineWidth(0.5);\n    doc.line(marginX, lineY, 559, lineY);\n\n    // Optional logo (if exists under /logo.png)\n    try {\n      const img = await loadImage('/logo.png');\n      const cnv = document.createElement('canvas');\n      cnv.width = img.width; cnv.height = img.height;\n      const ctx = cnv.getContext('2d');\n      ctx.drawImage(img, 0, 0);\n      const base64 = cnv.toDataURL('image/png');\n      doc.addImage(base64, 'PNG', 500, 16, 56, 56);\n    } catch {}\n\n    // Table\n    const body = rows.map(r => [\n      r.date,\n      r.clockIn ? new Date(r.clockIn).toLocaleString() : '-',\n      r.clockOut ? new Date(r.clockOut).toLocaleString() : '-',\n      fmtMin(r.regularMinutes || 0),\n      fmtMin(r.overtimeMinutes || 0),\n      fmtMin(r.totalMinutes || 0),\n    ]);\n    doc.autoTable({\n      startY: lineY + 16,\n      head: [['תאריך', 'Clock In', 'Clock Out', 'רגיל', 'נוספות', 'סה״כ']],\n      body,\n      styles: { font: 'helvetica', fontSize: 10 },\n      headStyles: { fillColor: [20, 20, 20], textColor: [255, 255, 255] },\n      margin: { left: marginX, right: marginX }\n    });\n\n    // Footer sum\n    const finalY = doc.lastAutoTable.finalY || (lineY + 16);\n    doc.setFontSize(11);\n    doc.text(`Totals: רגיל ${fmtMin(totals.regularMinutes)}, נוספות ${fmtMin(totals.overtimeMinutes)}, סה״כ ${fmtMin(totals.totalMinutes)}`, marginX, finalY + 24);\n    doc.save(`Costoro-${(me?.name || 'me')}-${fileDateStamp()}.pdf`);\n  }\n\n  /* ===== Presets ===== */\n  function setPreset(kind) {\n    const d = new Date();\n    const toLocalISO = (x) => {\n      const off = x.getTimezoneOffset();\n      const z = new Date(x.getTime() - off * 60000);\n      return z.toISOString().slice(0, 10);\n    };\n    if (kind === 'today') {\n      const t = toLocalISO(new Date());\n      setFrom(t); setTo(t);\n    } else if (kind === 'yesterday') {\n      const y = new Date(d);\n      y.setDate(d.getDate() - 1);\n      const t = toLocalISO(y);\n      setFrom(t); setTo(t);\n    } else if (kind === 'week') {\n      const day = d.getDay(); // 0..6\n      const monday = new Date(d);\n      const sunday = new Date(d);\n      monday.setDate(d.getDate() - ((day + 6) % 7));\n      sunday.setDate(monday.getDate() + 6);\n      setFrom(toLocalISO(monday));\n      setTo(toLocalISO(sunday));\n    } else if (kind === 'month') {\n      const first = new Date(d.getFullYear(), d.getMonth(), 1);\n      const last = new Date(d.getFullYear(), d.getMonth() + 1, 0);\n      setFrom(toLocalISO(first));\n      setTo(toLocalISO(last));\n    }\n  }\n\n  /* ===== Logout ===== */\n  function logout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    localStorage.removeItem('auth');\n    window.location.href = '/login';\n  }\n\n  /* ===== Render ===== */\n  return (\n    <div className=\"min-h-screen bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100\">\n      <Toast {...(msg || {})} onClose={() => setMsg(null)} show={!!msg} />\n      {confirm && (\n        <Modal title={confirm.title} onClose={() => setConfirm(null)}>\n          <div className=\"space-y-4 text-right\">\n            <p>{confirm.body}</p>\n            <div className=\"flex gap-2 justify-end\">\n              <button className=\"btn\" onClick={() => { setConfirm(null); confirm.onConfirm?.(); }}>אישור</button>\n              <button className=\"btn btn--gray\" onClick={() => setConfirm(null)}>ביטול</button>\n            </div>\n          </div>\n        </Modal>\n      )}\n\n      {/* Header */}\n      <header className=\"flex items-center justify-between p-4\">\n        <div className=\"flex items-center gap-2\">\n          <button className=\"btn btn--light\" onClick={() => window.location.reload()}>טען</button>\n          <div className=\"px-3 py-1 rounded-full bg-black text-white text-sm\"> {new Date().toLocaleTimeString()} </div>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <button className=\"btn btn--light\" onClick={() => setDark(v => !v)}>{dark ? 'מצב בהיר' : 'מצב כהה'}</button>\n          <button className=\"btn btn--light\" onClick={() => window.open('/kiosk', '_blank')}>עמדת סריקה (QR)</button>\n          {me?.role === 'admin' && (\n            <button className=\"btn btn--light\" onClick={() => (window.location.href = '/admin/users')}>ניהול משתמשים</button>\n          )}\n          <div className=\"text-right\">\n            <div className=\"font-semibold\">שלום {me?.name || '...'}</div>\n            <div className=\"text-xs opacity-70\">{me?.email || ''}</div>\n          </div>\n          <img src=\"/logo.png\" alt=\"Logo\" className=\"w-8 h-8 rounded-md\" />\n        </div>\n      </header>\n\n      <main className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 px-4 pb-10\">\n        {/* Left: Today */}\n        <div className=\"bg-white dark:bg-slate-800 rounded-2xl shadow p-5 min-h-[360px]\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <h2 className=\"text-lg font-bold\">היום</h2>\n            <div className=\"text-sm opacity-70\">{today ? today.date : todayISO()}</div>\n          </div>\n\n          {/* Buttons */}\n          <div className=\"flex flex-wrap gap-2 mb-4\">\n            <button className=\"btn\" disabled={hasOpenShift} onClick={doClockIn}>Clock In</button>\n            <button className=\"btn btn--gray\" disabled={!hasOpenShift || onBreak} onClick={startBreak}>Start Break</button>\n            <button className=\"btn btn--gray\" disabled={!onBreak} onClick={endBreak}>End Break</button>\n            <button className=\"btn btn--gray\" disabled={!hasOpenShift} onClick={doClockOut}>Clock Out</button>\n          </div>\n\n          {/* Status */}\n          {loadingToday ? (\n            <div className=\"animate-pulse h-40 rounded-xl bg-slate-100 dark:bg-slate-700\" />\n          ) : !today ? (\n            <div className=\"opacity-70\">לא במשמרת</div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <div><span className=\"font-semibold\">Clock In:</span> {today.clockIn ? new Date(today.clockIn).toLocaleTimeString() : '-'}</div>\n                <div><span className=\"font-semibold\">Clock Out:</span> {today.clockOut ? new Date(today.clockOut).toLocaleTimeString() : '-'}</div>\n                <div><span className=\"font-semibold\">סה״כ (חי):</span> {fmtMin(liveMinutes)}</div>\n                <div><span className=\"font-semibold\">רגיל:</span> {fmtMin(today.regularMinutes || 0)}</div>\n                <div><span className=\"font-semibold\">נוספות:</span> {fmtMin(today.overtimeMinutes || 0)}</div>\n              </div>\n              <div>\n                <div className=\"font-semibold mb-1\">הפסקות:</div>\n                <ul className=\"list-disc pr-5 space-y-1\">\n                  {(today.breaks || []).map((b, i) => (\n                    <li key={i}>\n                      {b.start ? new Date(b.start).toLocaleTimeString() : '-'} → {b.end ? new Date(b.end).toLocaleTimeString() : '—'}\n                    </li>\n                  ))}\n                  {!today.breaks?.length && <li className=\"opacity-60\">—</li>}\n                </ul>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Right: Report */}\n        <div className=\"bg-white dark:bg-slate-800 rounded-2xl shadow p-5\">\n          <div className=\"flex flex-wrap items-center justify-between gap-2 mb-2\">\n            <h2 className=\"text-lg font-bold\">דוח לפי תאריכים</h2>\n            <div className=\"flex items-center gap-3\">\n              <a className=\"link\" onClick={exportPDF}>PDF</a>\n              <a className=\"link\" onClick={exportExcel}>Excel</a>\n              <a className=\"link\" onClick={exportCSV}>CSV</a>\n            </div>\n          </div>\n\n          {/* Filters */}\n          <div className=\"flex flex-wrap items-center gap-2 mb-3\">\n            <div className=\"btn-group\">\n              <button className=\"btn btn--light\" onClick={() => setPreset('today')}>היום</button>\n              <button className=\"btn btn--light\" onClick={() => setPreset('yesterday')}>אתמול</button>\n              <button className=\"btn btn--light\" onClick={() => setPreset('week')}>השבוע</button>\n              <button className=\"btn btn--light\" onClick={() => setPreset('month')}>החודש</button>\n            </div>\n\n            <input type=\"date\" value={from} onChange={(e) => setFrom(e.target.value)} className=\"input\" />\n            <span>עד</span>\n            <input type=\"date\" value={to} onChange={(e) => setTo(e.target.value)} className=\"input\" />\n            {me?.role === 'admin' && (\n              <select className=\"input\" value={userId} onChange={(e) => setUserId(e.target.value)}>\n                <option value=\"\">— כלול/ה את עצמי —</option>\n                {/* אפשר להרחיב לרשימת עובדים; לעת עתה זה שדה חופשי אם מכירים userId */}\n              </select>\n            )}\n          </div>\n\n          {/* Table */}\n          <div className=\"overflow-auto max-h-[500px] rounded-xl border border-slate-200 dark:border-slate-700\">\n            <table className=\"w-full text-right text-sm\">\n              <thead className=\"sticky top-0 bg-slate-100 dark:bg-slate-700\">\n                <tr>\n                  <th className=\"th\">תאריך</th>\n                  <th className=\"th\">Clock In</th>\n                  <th className=\"th\">Clock Out</th>\n                  <th className=\"th\">רגיל</th>\n                  <th className=\"th\">נוספות</th>\n                  <th className=\"th\">ס״כ</th>\n                  <th className=\"th\"></th>\n                </tr>\n              </thead>\n              <tbody>\n                {loadingReport ? (\n                  Array.from({ length: 6 }).map((_, i) => (\n                    <tr key={i}>\n                      <td colSpan=\"7\">\n                        <div className=\"animate-pulse h-9 bg-slate-100 dark:bg-slate-700\" />\n                      </td>\n                    </tr>\n                  ))\n                ) : (\n                  rows.map((r) => (\n                    <tr key={r._id || r.date} className=\"odd:bg-white even:bg-slate-50 dark:odd:bg-slate-800 dark:even:bg-slate-700\">\n                      <td className=\"td\">{r.date}</td>\n                      <td className=\"td\">{r.clockIn ? new Date(r.clockIn).toLocaleTimeString() : '-'}</td>\n                      <td className=\"td\">{r.clockOut ? new Date(r.clockOut).toLocaleTimeString() : '-'}</td>\n                      <td className=\"td\">{fmtMin(r.regularMinutes || 0)}</td>\n                      <td className=\"td\">{fmtMin(r.overtimeMinutes || 0)}</td>\n                      <td className=\"td\">{fmtMin(r.totalMinutes || 0)}</td>\n                      <td className=\"td\">\n                        <button className=\"btn btn--tiny\" disabled>ערוך</button>\n                      </td>\n                    </tr>\n                  ))\n                )}\n              </tbody>\n              {!loadingReport && (\n                <tfoot>\n                  <tr className=\"bg-slate-100 dark:bg-slate-700 font-semibold\">\n                    <td className=\"td\">סיכום</td>\n                    <td className=\"td\"></td>\n                    <td className=\"td\"></td>\n                    <td className=\"td\">{fmtMin(totals.regularMinutes)}</td>\n                    <td className=\"td\">{fmtMin(totals.overtimeMinutes)}</td>\n                    <td className=\"td\">{fmtMin(totals.totalMinutes)}</td>\n                    <td className=\"td\"></td>\n                  </tr>\n                </tfoot>\n              )}\n            </table>\n          </div>\n        </div>\n      </main>\n\n      <footer className=\"px-4 py-6 flex items-center justify-between\">\n        <div className=\"opacity-70 text-sm\">© {new Date().getFullYear()} Costoro</div>\n        <button className=\"btn btn--light\" onClick={logout}>התנתק</button>\n      </footer>\n\n      {/* Minimal styles (keep them local to page) */}\n      <style>{`\n        .btn{background:black;color:white;border-radius:0.75rem;padding:0.5rem 1rem}\n        .btn--gray{background:#e5e7eb;color:#111827}\n        .btn--light{background:#f1f5f9;color:#111827}\n        .btn[disabled]{opacity:.4;cursor:not-allowed}\n        .btn-group .btn{margin-inline-end:0.25rem}\n        .btn--tiny{padding:0.25rem 0.5rem;border-radius:0.5rem;font-size:0.75rem}\n        .input{border:1px solid #cbd5e1;border-radius:0.75rem;padding:0.4rem 0.6rem;background:#f8fafc}\n        .link{cursor:pointer;text-decoration:underline}\n        .th{position:sticky; top:0; padding:0.5rem; text-align:right}\n        .td{padding:0.5rem}\n      `}</style>\n    </div>\n  );\n}\n\n/* ===== Hooks ===== */\nfunction useLiveMinutes(today) {\n  const [min, setMin] = useState(0);\n  useEffect(() => {\n    function calc() {\n      if (!today || !today.clockIn) return setMin(0);\n      const start = new Date(today.clockIn).getTime();\n      let now = Date.now();\n      let workingMs = now - start;\n      const breaks = Array.isArray(today.breaks) ? today.breaks : [];\n      for (const b of breaks) {\n        const s = b.start ? new Date(b.start).getTime() : null;\n        const e = b.end ? new Date(b.end).getTime() : null;\n        if (s) {\n          if (e) workingMs -= Math.max(0, e - s);\n          else workingMs -= Math.max(0, now - s); // open break\n        }\n      }\n      setMin(Math.max(0, Math.floor(workingMs / 60000)));\n    }\n    calc();\n    const t = setInterval(calc, 1000);\n    return () => clearInterval(t);\n  }, [today?.clockIn, JSON.stringify(today?.breaks || [])]);\n  return min;\n}\n\n/* helper */\nfunction loadImage(src) {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n    img.src = src;\n  });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}