{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\timewatch-clone\\\\client\\\\src\\\\pages\\\\Dashboard.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// client/src/pages/Dashboard.js\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { api } from '../api';\nimport Toast from '../components/Toast';\nimport Modal from '../components/Modal';\nimport jsPDF from 'jspdf';\nimport 'jspdf-autotable';\nimport * as XLSX from 'xlsx';\n\n/* ========== Utilities ========== */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction fmtMin(n) {\n  if (n == null || isNaN(n)) return '0ד';\n  const h = Math.floor(n / 60);\n  const m = Math.round(n % 60);\n  return `${h}ש ${m}ד`;\n}\nconst toLocalDate = d => new Date(d).toLocaleDateString();\nconst toLocalTime = d => new Date(d).toLocaleTimeString();\nfunction todayISO() {\n  const d = new Date();\n  const off = d.getTimezoneOffset();\n  const z = new Date(d.getTime() - off * 60000);\n  return z.toISOString().slice(0, 10);\n}\nasync function getGeo() {\n  if (!('geolocation' in navigator)) return null;\n  return new Promise(resolve => {\n    navigator.geolocation.getCurrentPosition(pos => resolve({\n      lat: pos.coords.latitude,\n      lng: pos.coords.longitude\n    }), () => resolve(null), {\n      enableHighAccuracy: false,\n      timeout: 3000,\n      maximumAge: 60000\n    });\n  });\n}\nfunction fileDateStamp(d = new Date()) {\n  const pad = n => String(n).padStart(2, '0');\n  return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}`;\n}\n// value for <input type=\"datetime-local\">\nfunction toDatetimeLocalValue(dt) {\n  if (!dt) return '';\n  const d = new Date(dt);\n  const off = d.getTimezoneOffset();\n  const z = new Date(d.getTime() - off * 60000);\n  return z.toISOString().slice(0, 16);\n}\n\n/* ========== Component ========== */\nexport default function Dashboard() {\n  _s();\n  var _me$permissions, _today$breaks;\n  const [me, setMe] = useState(null);\n\n  // Today\n  const [today, setToday] = useState(null);\n  const [loadingToday, setLoadingToday] = useState(true);\n\n  // Report\n  const [from, setFrom] = useState(todayISO());\n  const [to, setTo] = useState(todayISO());\n  const [userId, setUserId] = useState('');\n  const [rows, setRows] = useState([]);\n  const [loadingReport, setLoadingReport] = useState(false);\n\n  // UI\n  const [msg, setMsg] = useState(null);\n  const [confirm, setConfirm] = useState(null);\n\n  // Edit modal\n  const [editing, setEditing] = useState(null); // the row being edited\n  const [editClockIn, setEditClockIn] = useState('');\n  const [editClockOut, setEditClockOut] = useState('');\n\n  // Dark mode (עצמאי)\n  const [dark, setDark] = useState(() => {\n    try {\n      return localStorage.getItem('tw_dark') === '1';\n    } catch {\n      return false;\n    }\n  });\n  useEffect(() => {\n    const root = document.documentElement;\n    if (dark) root.classList.add('dark');else root.classList.remove('dark');\n    try {\n      localStorage.setItem('tw_dark', dark ? '1' : '0');\n    } catch {}\n  }, [dark]);\n\n  /* ===== Data ===== */\n  useEffect(() => {\n    let stop = false;\n    (async () => {\n      try {\n        const data = await api('/api/auth/me');\n        if (!stop) setMe(data);\n      } catch {}\n    })();\n    return () => {\n      stop = true;\n    };\n  }, []);\n  async function refreshToday() {\n    setLoadingToday(true);\n    try {\n      const t = todayISO();\n      const res = await api(`/api/attendance/report?from=${t}&to=${t}`);\n      const mine = Array.isArray(res) && res.length ? res[0] : null;\n      setToday(mine || null);\n    } catch (e) {\n      setMsg({\n        type: 'error',\n        title: 'שגיאה',\n        message: e.message\n      });\n    } finally {\n      setLoadingToday(false);\n    }\n  }\n  async function refreshReport() {\n    setLoadingReport(true);\n    try {\n      const qs = new URLSearchParams({\n        from,\n        to\n      });\n      if (userId) qs.set('userId', userId);\n      const data = await api(`/api/attendance/report?${qs.toString()}`);\n      setRows(Array.isArray(data) ? data : []);\n    } catch (e) {\n      setMsg({\n        type: 'error',\n        title: 'שגיאה',\n        message: e.message\n      });\n    } finally {\n      setLoadingReport(false);\n    }\n  }\n  useEffect(() => {\n    refreshToday();\n  }, []);\n  useEffect(() => {\n    refreshReport();\n  }, [from, to, userId]);\n  const hasOpenShift = !!(today && today.clockIn && !today.clockOut);\n  const onBreak = useMemo(() => {\n    if (!today || !today.breaks) return false;\n    const last = today.breaks[today.breaks.length - 1];\n    return !!(last && last.start && !last.end);\n  }, [today]);\n  const liveMinutes = useLiveMinutes(today);\n\n  /* ===== Actions ===== */\n  async function doClockIn() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? {\n        coords\n      } : undefined;\n      await api('/api/attendance/clockin', {\n        method: 'POST',\n        body: JSON.stringify(body)\n      });\n      setMsg({\n        type: 'success',\n        title: 'Clock In בוצע'\n      });\n      await refreshToday();\n      await refreshReport();\n    } catch (e) {\n      setMsg({\n        type: 'error',\n        title: 'שגיאה',\n        message: e.message\n      });\n    }\n  }\n  async function doClockOut() {\n    if (onBreak) {\n      setConfirm({\n        title: 'סגירת משמרת בזמן הפסקה',\n        body: 'יש הפסקה פתוחה. לסגור אותה ולבצע Clock Out?',\n        onConfirm: async () => {\n          try {\n            await api('/api/attendance/break/end', {\n              method: 'POST'\n            });\n          } catch {}\n          await reallyClockOut();\n        }\n      });\n      return;\n    }\n    await reallyClockOut();\n  }\n  async function reallyClockOut() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? {\n        coords\n      } : undefined;\n      await api('/api/attendance/clockout', {\n        method: 'POST',\n        body: JSON.stringify(body)\n      });\n      setMsg({\n        type: 'success',\n        title: 'Clock Out בוצע'\n      });\n      await refreshToday();\n      await refreshReport();\n    } catch (e) {\n      setMsg({\n        type: 'error',\n        title: 'שגיאה',\n        message: e.message\n      });\n    }\n  }\n  async function startBreak() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? {\n        coords\n      } : undefined;\n      await api('/api/attendance/break/start', {\n        method: 'POST',\n        body: JSON.stringify(body)\n      });\n      setMsg({\n        type: 'success',\n        title: 'הפסקה התחילה'\n      });\n      await refreshToday();\n      await refreshReport();\n    } catch (e) {\n      setMsg({\n        type: 'error',\n        title: 'שגיאה',\n        message: e.message\n      });\n    }\n  }\n  async function endBreak() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? {\n        coords\n      } : undefined;\n      await api('/api/attendance/break/end', {\n        method: 'POST',\n        body: JSON.stringify(body)\n      });\n      setMsg({\n        type: 'success',\n        title: 'הפסקה הסתיימה'\n      });\n      await refreshToday();\n      await refreshReport();\n    } catch (e) {\n      setMsg({\n        type: 'error',\n        title: 'שגיאה',\n        message: e.message\n      });\n    }\n  }\n  const totals = useMemo(() => {\n    const sum = k => rows.reduce((a, r) => a + (Number(r[k]) || 0), 0);\n    return {\n      regularMinutes: sum('regularMinutes'),\n      overtimeMinutes: sum('overtimeMinutes'),\n      totalMinutes: sum('totalMinutes')\n    };\n  }, [rows]);\n\n  /* ===== Edit row ===== */\n  function openEdit(row) {\n    setEditing(row);\n    setEditClockIn(toDatetimeLocalValue(row.clockIn));\n    setEditClockOut(toDatetimeLocalValue(row.clockOut));\n  }\n  async function saveEdit() {\n    if (!(editing !== null && editing !== void 0 && editing._id)) return;\n    try {\n      const payload = {};\n      if (editClockIn) payload.clockIn = new Date(editClockIn).toISOString();\n      if (editClockOut) payload.clockOut = new Date(editClockOut).toISOString();\n      await api(`/api/attendance/${editing._id}`, {\n        method: 'PUT',\n        body: JSON.stringify(payload)\n      });\n      setMsg({\n        type: 'success',\n        title: 'רשומה עודכנה בהצלחה'\n      });\n      setEditing(null);\n      await refreshToday();\n      await refreshReport();\n    } catch (e) {\n      setMsg({\n        type: 'error',\n        title: 'עדכון נכשל',\n        message: e.message\n      });\n    }\n  }\n\n  /* ===== Exports ===== */\n  function exportCSV() {\n    const header = ['date', 'clockIn', 'clockOut', 'regularMinutes', 'overtimeMinutes', 'totalMinutes'];\n    const lines = [header.join(',')].concat(rows.map(r => {\n      var _r$regularMinutes, _r$overtimeMinutes, _r$totalMinutes;\n      return [r.date, r.clockIn ? new Date(r.clockIn).toLocaleString() : '', r.clockOut ? new Date(r.clockOut).toLocaleString() : '', (_r$regularMinutes = r.regularMinutes) !== null && _r$regularMinutes !== void 0 ? _r$regularMinutes : 0, (_r$overtimeMinutes = r.overtimeMinutes) !== null && _r$overtimeMinutes !== void 0 ? _r$overtimeMinutes : 0, (_r$totalMinutes = r.totalMinutes) !== null && _r$totalMinutes !== void 0 ? _r$totalMinutes : 0].join(',');\n    }));\n    const blob = new Blob([lines.join('\\n')], {\n      type: 'text/csv;charset=utf-8'\n    });\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    const who = userId ? `user-${userId}` : (me === null || me === void 0 ? void 0 : me.name) || 'me';\n    a.download = `Costoro-${who}-${from}_to_${to}.csv`;\n    a.click();\n  }\n  function exportExcel() {\n    const rows2 = rows.map(r => ({\n      Date: r.date,\n      ClockIn: r.clockIn ? new Date(r.clockIn).toLocaleString() : '',\n      ClockOut: r.clockOut ? new Date(r.clockOut).toLocaleString() : '',\n      RegularMinutes: r.regularMinutes || 0,\n      OvertimeMinutes: r.overtimeMinutes || 0,\n      TotalMinutes: r.totalMinutes || 0\n    }));\n    const wb = XLSX.utils.book_new();\n    const ws = XLSX.utils.json_to_sheet(rows2);\n    XLSX.utils.book_append_sheet(wb, ws, 'Report');\n    const who = userId ? `user-${userId}` : (me === null || me === void 0 ? void 0 : me.name) || 'me';\n    XLSX.writeFile(wb, `Costoro-${who}-${from}_to_${to}.xlsx`);\n  }\n  async function exportPDF() {\n    const doc = new jsPDF('p', 'pt');\n    const marginX = 36;\n    const lineY = 64;\n    doc.setFontSize(16);\n    doc.text('Costoro - Attendance Report', marginX, 30);\n    doc.setFontSize(11);\n    const who = userId ? `User: ${userId}` : me !== null && me !== void 0 && me.name ? `User: ${me.name}` : 'User: Me';\n    doc.text(`${who}    Range: ${from} → ${to}`, marginX, 46);\n    doc.setLineWidth(0.5);\n    doc.line(marginX, lineY, 559, lineY);\n    try {\n      const img = await loadImage('/logo.png');\n      const cnv = document.createElement('canvas');\n      cnv.width = img.width;\n      cnv.height = img.height;\n      const ctx = cnv.getContext('2d');\n      ctx.drawImage(img, 0, 0);\n      const base64 = cnv.toDataURL('image/png');\n      doc.addImage(base64, 'PNG', 500, 16, 56, 56);\n    } catch {}\n    const body = rows.map(r => [r.date, r.clockIn ? new Date(r.clockIn).toLocaleString() : '-', r.clockOut ? new Date(r.clockOut).toLocaleString() : '-', fmtMin(r.regularMinutes || 0), fmtMin(r.overtimeMinutes || 0), fmtMin(r.totalMinutes || 0)]);\n    doc.autoTable({\n      startY: lineY + 16,\n      head: [['תאריך', 'Clock In', 'Clock Out', 'רגיל', 'נוספות', 'סה״כ']],\n      body,\n      styles: {\n        font: 'helvetica',\n        fontSize: 10\n      },\n      headStyles: {\n        fillColor: [20, 20, 20],\n        textColor: [255, 255, 255]\n      },\n      margin: {\n        left: marginX,\n        right: marginX\n      }\n    });\n    const finalY = doc.lastAutoTable.finalY || lineY + 16;\n    doc.setFontSize(11);\n    doc.text(`Totals: רגיל ${fmtMin(totals.regularMinutes)}, נוספות ${fmtMin(totals.overtimeMinutes)}, סה״כ ${fmtMin(totals.totalMinutes)}`, marginX, finalY + 24);\n    doc.save(`Costoro-${(me === null || me === void 0 ? void 0 : me.name) || 'me'}-${fileDateStamp()}.pdf`);\n  }\n\n  /* ===== Presets ===== */\n  function setPreset(kind) {\n    const d = new Date();\n    const toLocalISO = x => {\n      const off = x.getTimezoneOffset();\n      const z = new Date(x.getTime() - off * 60000);\n      return z.toISOString().slice(0, 10);\n    };\n    if (kind === 'today') {\n      const t = toLocalISO(new Date());\n      setFrom(t);\n      setTo(t);\n    } else if (kind === 'yesterday') {\n      const y = new Date(d);\n      y.setDate(d.getDate() - 1);\n      const t = toLocalISO(y);\n      setFrom(t);\n      setTo(t);\n    } else if (kind === 'week') {\n      const day = d.getDay();\n      const monday = new Date(d);\n      const sunday = new Date(d);\n      monday.setDate(d.getDate() - (day + 6) % 7);\n      sunday.setDate(monday.getDate() + 6);\n      setFrom(toLocalISO(monday));\n      setTo(toLocalISO(sunday));\n    } else if (kind === 'month') {\n      const first = new Date(d.getFullYear(), d.getMonth(), 1);\n      const last = new Date(d.getFullYear(), d.getMonth() + 1, 0);\n      setFrom(toLocalISO(first));\n      setTo(toLocalISO(last));\n    }\n  }\n  function logout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    localStorage.removeItem('auth');\n    window.location.href = '/login';\n  }\n\n  /* ===== Render ===== */\n  const canEditRows = !!(me !== null && me !== void 0 && (_me$permissions = me.permissions) !== null && _me$permissions !== void 0 && _me$permissions.attendanceEdit);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page\",\n    children: [/*#__PURE__*/_jsxDEV(Toast, {\n      ...(msg || {}),\n      onClose: () => setMsg(null),\n      show: !!msg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 7\n    }, this), confirm && /*#__PURE__*/_jsxDEV(Modal, {\n      title: confirm.title,\n      onClose: () => setConfirm(null),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: confirm.body\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row end gap\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            onClick: () => {\n              var _confirm$onConfirm;\n              setConfirm(null);\n              (_confirm$onConfirm = confirm.onConfirm) === null || _confirm$onConfirm === void 0 ? void 0 : _confirm$onConfirm.call(confirm);\n            },\n            children: \"\\u05D0\\u05D9\\u05E9\\u05D5\\u05E8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn gray\",\n            onClick: () => setConfirm(null),\n            children: \"\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 9\n    }, this), editing && /*#__PURE__*/_jsxDEV(Modal, {\n      title: `עריכת יום ${toLocalDate(editing.date || editing.clockIn || Date.now())}`,\n      onClose: () => setEditing(null),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"stack\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Clock In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            type: \"datetime-local\",\n            value: editClockIn,\n            onChange: e => setEditClockIn(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"stack\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Clock Out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            type: \"datetime-local\",\n            value: editClockOut,\n            onChange: e => setEditClockOut(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row end gap\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            onClick: saveEdit,\n            children: \"\\u05E9\\u05DE\\u05D5\\u05E8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn gray\",\n            onClick: () => setEditing(null),\n            children: \"\\u05D1\\u05D8\\u05DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"topbar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row gap\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"chip\",\n          onClick: () => setDark(v => !v),\n          children: dark ? 'מצב בהיר' : 'מצב כהה'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"chip\",\n          onClick: () => window.open('/kiosk', '_blank'),\n          children: \"\\u05E2\\u05DE\\u05D3\\u05EA \\u05E1\\u05E8\\u05D9\\u05E7\\u05D4 (QR)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this), (me === null || me === void 0 ? void 0 : me.role) === 'admin' && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"chip\",\n          onClick: () => window.location.href = '/admin/users',\n          children: \"\\u05E0\\u05D9\\u05D4\\u05D5\\u05DC \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9\\u05D9\\u05DD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row gap\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"clock\",\n          children: new Date().toLocaleTimeString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"userbox\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/logo.png\",\n            alt: \"Logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"name\",\n              children: [\"\\u05E9\\u05DC\\u05D5\\u05DD \", (me === null || me === void 0 ? void 0 : me.name) || '...']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"email\",\n              children: (me === null || me === void 0 ? void 0 : me.email) || ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-head\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u05D3\\u05D5\\u05D7 \\u05DC\\u05E4\\u05D9 \\u05EA\\u05D0\\u05E8\\u05D9\\u05DB\\u05D9\\u05DD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row gap\",\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"link\",\n              onClick: exportCSV,\n              children: \"CSV\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"link\",\n              onClick: exportExcel,\n              children: \"Excel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"link\",\n              onClick: exportPDF,\n              children: \"PDF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filters\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row gap wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"input\",\n              value: userId,\n              onChange: e => setUserId(e.target.value),\n              children: /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"\\u2014 \\u05DB\\u05D5\\u05DC/\\u05D4 \\u05D0\\u05EA \\u05E2\\u05E6\\u05DE\\u05D9 \\u2014\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              type: \"date\",\n              value: from,\n              onChange: e => setFrom(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u05E2\\u05D3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              type: \"date\",\n              value: to,\n              onChange: e => setTo(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row gap\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"chip\",\n                onClick: () => setPreset('today'),\n                children: \"\\u05D4\\u05D9\\u05D5\\u05DD\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"chip\",\n                onClick: () => setPreset('yesterday'),\n                children: \"\\u05D0\\u05EA\\u05DE\\u05D5\\u05DC\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"chip\",\n                onClick: () => setPreset('week'),\n                children: \"\\u05D4\\u05E9\\u05D1\\u05D5\\u05E2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"chip\",\n                onClick: () => setPreset('month'),\n                children: \"\\u05D4\\u05D7\\u05D5\\u05D3\\u05E9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 409,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-wrap\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 418,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Clock In\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 419,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Clock Out\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 420,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u05E8\\u05D2\\u05D9\\u05DC\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 421,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u05E0\\u05D5\\u05E1\\u05E4\\u05D5\\u05EA\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 422,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u05E1\\u05F4\\u05DB\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 423,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 424,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: loadingReport ? Array.from({\n                length: 6\n              }).map((_, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: /*#__PURE__*/_jsxDEV(\"td\", {\n                  colSpan: \"7\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"skeleton\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 430,\n                  columnNumber: 33\n                }, this)\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 21\n              }, this)) : rows.map(r => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"ltr\",\n                  children: r.date\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"ltr\",\n                  children: r.clockIn ? toLocalTime(r.clockIn) : '-'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 436,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"ltr\",\n                  children: r.clockOut ? toLocalTime(r.clockOut) : '-'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 437,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"ltr\",\n                  children: fmtMin(r.regularMinutes || 0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"ltr\",\n                  children: fmtMin(r.overtimeMinutes || 0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"ltr\",\n                  children: fmtMin(r.totalMinutes || 0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 440,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn tiny\",\n                    disabled: !canEditRows || !r._id,\n                    onClick: () => openEdit(r),\n                    title: !canEditRows ? 'אין הרשאה לעריכה' : 'ערוך',\n                    children: \"\\u05E2\\u05E8\\u05D5\\u05DA\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 442,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 441,\n                  columnNumber: 23\n                }, this)]\n              }, r._id || r.date, true, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 15\n            }, this), !loadingReport && /*#__PURE__*/_jsxDEV(\"tfoot\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"\\u05E1\\u05D9\\u05DB\\u05D5\\u05DD\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 458,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 459,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 459,\n                  columnNumber: 30\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"ltr\",\n                  children: fmtMin(totals.regularMinutes)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"ltr\",\n                  children: fmtMin(totals.overtimeMinutes)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 461,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"ltr\",\n                  children: fmtMin(totals.totalMinutes)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 463,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 457,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 456,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-head\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u05D4\\u05D9\\u05D5\\u05DD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"muted\",\n            children: today ? today.date : todayISO()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row gap wrap end mb\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            disabled: hasOpenShift,\n            onClick: doClockIn,\n            children: \"Clock In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn gray\",\n            disabled: !hasOpenShift || onBreak,\n            onClick: startBreak,\n            children: \"Start Break\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn gray\",\n            disabled: !onBreak,\n            onClick: endBreak,\n            children: \"End Break\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn gray\",\n            disabled: !hasOpenShift,\n            onClick: doClockOut,\n            children: \"Clock Out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 11\n        }, this), loadingToday ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"skeleton big\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 13\n        }, this) : !today ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"muted\",\n          children: \"\\u05DC\\u05D0 \\u05D1\\u05DE\\u05E9\\u05DE\\u05E8\\u05EA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"two\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stack\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Clock In:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 22\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ltr\",\n                children: today.clockIn ? toLocalTime(today.clockIn) : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 39\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Clock Out:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 22\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ltr\",\n                children: today.clockOut ? toLocalTime(today.clockOut) : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 40\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"\\u05E1\\u05D4\\u05F4\\u05DB (\\u05D7\\u05D9):\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 494,\n                columnNumber: 22\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ltr\",\n                children: fmtMin(liveMinutes)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 494,\n                columnNumber: 40\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"\\u05E8\\u05D2\\u05D9\\u05DC:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 22\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ltr\",\n                children: fmtMin(today.regularMinutes || 0)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 35\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"\\u05E0\\u05D5\\u05E1\\u05E4\\u05D5\\u05EA:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 22\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ltr\",\n                children: fmtMin(today.overtimeMinutes || 0)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stack\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"b\",\n              children: \"\\u05D4\\u05E4\\u05E1\\u05E7\\u05D5\\u05EA:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"bullets\",\n              children: [(today.breaks || []).map((b, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"ltr\",\n                children: [b.start ? toLocalTime(b.start) : '-', \" \\u2192 \", b.end ? toLocalTime(b.end) : '—']\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 21\n              }, this)), !((_today$breaks = today.breaks) !== null && _today$breaks !== void 0 && _today$breaks.length) && /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"\\u2014\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"footer\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn gray\",\n        onClick: logout,\n        children: \"\\u05D4\\u05EA\\u05E0\\u05EA\\u05E7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"muted\",\n        children: [\"\\xA9 Costoro \", new Date().getFullYear()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 514,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        :root { --bg:#f4f7fb; --fg:#0f172a; --muted:#6b7280; --card:#ffffff; --border:#e5e7eb; --chip:#eef2f7; --chip-fg:#0f172a; --accent:#111; }\n        html.dark { --bg:#0f172a; --fg:#e5e7eb; --muted:#93a1b5; --card:#111827; --border:#273043; --chip:#1f2937; --chip-fg:#e5e7eb; --accent:#f8fafc; }\n        html, body, #root { height:100%; }\n        body { background:var(--bg); color:var(--fg); }\n        .page { min-height:100vh; display:flex; flex-direction:column; gap:16px; }\n        .topbar { display:flex; justify-content:space-between; align-items:center; padding:14px 16px; }\n        .row { display:flex; align-items:center; }\n        .row.end { justify-content:flex-end; }\n        .row.wrap { flex-wrap:wrap; }\n        .gap { gap:10px; }\n        .mb { margin-bottom:10px; }\n        .clock { background:#000; color:#fff; border-radius:999px; padding:4px 10px; font-size:12px; }\n        .userbox { display:flex; gap:10px; align-items:center; }\n        .userbox img { width:32px; height:32px; border-radius:6px; }\n        .userbox .name { font-weight:700; font-size:14px; }\n        .userbox .email { font-size:12px; color:var(--muted); }\n        .chip { background:var(--chip); color:var(--chip-fg); border:1px solid var(--border); border-radius:10px; padding:6px 10px; font-size:13px; }\n        .grid { display:grid; grid-template-columns:1fr 1fr; gap:16px; padding:0 16px 20px; }\n        @media (max-width: 1024px){ .grid{ grid-template-columns:1fr; } }\n        .card { background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:0 1px 2px rgba(0,0,0,.03); padding:14px; color:var(--fg); }\n        .card * { color: inherit; } /* מבטיח טקסט בהיר במצב כהה גם בתוך רכיבים פנימיים */\n        .card-head { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }\n        .card-head h2 { margin:0; font-size:18px; }\n        .muted { color:var(--muted); font-size:13px; }\n        .filters { padding:8px 0; border-top:1px solid var(--border); border-bottom:1px solid var(--border); margin-bottom:10px; }\n        .input { border:1px solid var(--border); background:transparent; color:var(--fg); border-radius:10px; padding:6px 10px; font-size:14px; }\n        .btn { background:#111; color:#fff; border:none; border-radius:10px; padding:8px 14px; font-weight:600; }\n        .btn.gray { background:var(--chip); color:var(--chip-fg); border:1px solid var(--border); }\n        .btn.tiny { padding:4px 8px; font-size:12px; }\n        .btn[disabled]{ opacity:.45; cursor:not-allowed; }\n        .link { text-decoration:underline; cursor:pointer; color:var(--fg); opacity:.9; }\n        .table-wrap { max-height:480px; overflow:auto; border:1px solid var(--border); border-radius:10px; }\n        .table { width:100%; border-collapse:separate; border-spacing:0; direction:rtl; }\n        .table thead th, .table tbody td, .table tfoot td { color:var(--fg); }\n        .table thead th { position:sticky; top:0; background:var(--chip); color:var(--chip-fg); text-align:right; padding:10px; border-bottom:1px solid var(--border); font-weight:700; }\n        .table tbody td { padding:10px; border-bottom:1px solid var(--border); }\n        .table tbody tr:nth-child(even){ background:rgba(255,255,255,.03); }\n        html.dark .table tbody tr:nth-child(even){ background:rgba(255,255,255,.04); }\n        .table tfoot td { padding:10px; background:var(--chip); color:var(--chip-fg); font-weight:700; position:sticky; bottom:0; }\n        .skeleton { height:36px; background:linear-gradient(90deg, rgba(0,0,0,.06), rgba(0,0,0,.02), rgba(0,0,0,.06)); animation:s 1.4s infinite; border-radius:8px; }\n        .skeleton.big { height:120px; }\n        @keyframes s { 0%{background-position:-200px 0} 100%{background-position:200px 0} }\n        .two { display:grid; grid-template-columns:1fr 1fr; gap:14px; }\n        @media (max-width: 680px){ .two{ grid-template-columns:1fr; } }\n        .stack { display:flex; flex-direction:column; gap:6px; }\n        .b { font-weight:700; }\n        .bullets { margin:0; padding-right:18px; }\n        .bullets li { margin:4px 0; }\n        .footer { padding:12px 16px; display:flex; justify-content:space-between; align-items:center; }\n        .ltr { direction:ltr; unicode-bidi:bidi-override; } /* מספרים ותאריכים ישרים ב־RTL */\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 520,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 329,\n    columnNumber: 5\n  }, this);\n}\n\n/* ===== Hooks ===== */\n_s(Dashboard, \"56NIItFI9K91V8tGi4J+q4Z9bnE=\", false, function () {\n  return [useLiveMinutes];\n});\n_c = Dashboard;\nfunction useLiveMinutes(today) {\n  _s2();\n  const [min, setMin] = useState(0);\n  useEffect(() => {\n    function calc() {\n      if (!today || !today.clockIn) return setMin(0);\n      const start = new Date(today.clockIn).getTime();\n      let now = Date.now();\n      let workingMs = now - start;\n      const breaks = Array.isArray(today.breaks) ? today.breaks : [];\n      for (const b of breaks) {\n        const s = b.start ? new Date(b.start).getTime() : null;\n        const e = b.end ? new Date(b.end).getTime() : null;\n        if (s) {\n          if (e) workingMs -= Math.max(0, e - s);else workingMs -= Math.max(0, now - s);\n        }\n      }\n      setMin(Math.max(0, Math.floor(workingMs / 60000)));\n    }\n    calc();\n    const t = setInterval(calc, 1000);\n    return () => clearInterval(t);\n  }, [today === null || today === void 0 ? void 0 : today.clockIn, JSON.stringify((today === null || today === void 0 ? void 0 : today.breaks) || [])]);\n  return min;\n}\n_s2(useLiveMinutes, \"ngLVQ9bGP+CiLAyWkAZX8U2iXZI=\");\nfunction loadImage(src) {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n    img.src = src;\n  });\n}\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","api","Toast","Modal","jsPDF","XLSX","jsxDEV","_jsxDEV","fmtMin","n","isNaN","h","Math","floor","m","round","toLocalDate","d","Date","toLocaleDateString","toLocalTime","toLocaleTimeString","todayISO","off","getTimezoneOffset","z","getTime","toISOString","slice","getGeo","navigator","Promise","resolve","geolocation","getCurrentPosition","pos","lat","coords","latitude","lng","longitude","enableHighAccuracy","timeout","maximumAge","fileDateStamp","pad","String","padStart","getFullYear","getMonth","getDate","toDatetimeLocalValue","dt","Dashboard","_s","_me$permissions","_today$breaks","me","setMe","today","setToday","loadingToday","setLoadingToday","from","setFrom","to","setTo","userId","setUserId","rows","setRows","loadingReport","setLoadingReport","msg","setMsg","confirm","setConfirm","editing","setEditing","editClockIn","setEditClockIn","editClockOut","setEditClockOut","dark","setDark","localStorage","getItem","root","document","documentElement","classList","add","remove","setItem","stop","data","refreshToday","t","res","mine","Array","isArray","length","e","type","title","message","refreshReport","qs","URLSearchParams","set","toString","hasOpenShift","clockIn","clockOut","onBreak","breaks","last","start","end","liveMinutes","useLiveMinutes","doClockIn","body","undefined","method","JSON","stringify","doClockOut","onConfirm","reallyClockOut","startBreak","endBreak","totals","sum","k","reduce","a","r","Number","regularMinutes","overtimeMinutes","totalMinutes","openEdit","row","saveEdit","_id","payload","exportCSV","header","lines","join","concat","map","_r$regularMinutes","_r$overtimeMinutes","_r$totalMinutes","date","toLocaleString","blob","Blob","createElement","href","URL","createObjectURL","who","name","download","click","exportExcel","rows2","ClockIn","ClockOut","RegularMinutes","OvertimeMinutes","TotalMinutes","wb","utils","book_new","ws","json_to_sheet","book_append_sheet","writeFile","exportPDF","doc","marginX","lineY","setFontSize","text","setLineWidth","line","img","loadImage","cnv","width","height","ctx","getContext","drawImage","base64","toDataURL","addImage","autoTable","startY","head","styles","font","fontSize","headStyles","fillColor","textColor","margin","left","right","finalY","lastAutoTable","save","setPreset","kind","toLocalISO","x","y","setDate","day","getDay","monday","sunday","first","logout","removeItem","window","location","canEditRows","permissions","attendanceEdit","className","children","onClose","show","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_confirm$onConfirm","call","now","value","onChange","target","v","open","role","src","alt","email","_","i","colSpan","disabled","b","_c","_s2","min","setMin","calc","workingMs","s","max","setInterval","clearInterval","reject","Image","onload","onerror","$RefreshReg$"],"sources":["C:/Users/user/Desktop/timewatch-clone/client/src/pages/Dashboard.js"],"sourcesContent":["// client/src/pages/Dashboard.js\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { api } from '../api';\nimport Toast from '../components/Toast';\nimport Modal from '../components/Modal';\nimport jsPDF from 'jspdf';\nimport 'jspdf-autotable';\nimport * as XLSX from 'xlsx';\n\n/* ========== Utilities ========== */\nfunction fmtMin(n) {\n  if (n == null || isNaN(n)) return '0ד';\n  const h = Math.floor(n / 60);\n  const m = Math.round(n % 60);\n  return `${h}ש ${m}ד`;\n}\nconst toLocalDate = (d) => new Date(d).toLocaleDateString();\nconst toLocalTime = (d) => new Date(d).toLocaleTimeString();\n\nfunction todayISO() {\n  const d = new Date();\n  const off = d.getTimezoneOffset();\n  const z = new Date(d.getTime() - off * 60000);\n  return z.toISOString().slice(0, 10);\n}\nasync function getGeo() {\n  if (!('geolocation' in navigator)) return null;\n  return new Promise((resolve) => {\n    navigator.geolocation.getCurrentPosition(\n      (pos) => resolve({ lat: pos.coords.latitude, lng: pos.coords.longitude }),\n      () => resolve(null),\n      { enableHighAccuracy: false, timeout: 3000, maximumAge: 60000 }\n    );\n  });\n}\nfunction fileDateStamp(d = new Date()) {\n  const pad = (n) => String(n).padStart(2, '0');\n  return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}`;\n}\n// value for <input type=\"datetime-local\">\nfunction toDatetimeLocalValue(dt) {\n  if (!dt) return '';\n  const d = new Date(dt);\n  const off = d.getTimezoneOffset();\n  const z = new Date(d.getTime() - off * 60000);\n  return z.toISOString().slice(0, 16);\n}\n\n/* ========== Component ========== */\nexport default function Dashboard() {\n  const [me, setMe] = useState(null);\n\n  // Today\n  const [today, setToday] = useState(null);\n  const [loadingToday, setLoadingToday] = useState(true);\n\n  // Report\n  const [from, setFrom] = useState(todayISO());\n  const [to, setTo] = useState(todayISO());\n  const [userId, setUserId] = useState('');\n  const [rows, setRows] = useState([]);\n  const [loadingReport, setLoadingReport] = useState(false);\n\n  // UI\n  const [msg, setMsg] = useState(null);\n  const [confirm, setConfirm] = useState(null);\n\n  // Edit modal\n  const [editing, setEditing] = useState(null); // the row being edited\n  const [editClockIn, setEditClockIn] = useState('');\n  const [editClockOut, setEditClockOut] = useState('');\n\n  // Dark mode (עצמאי)\n  const [dark, setDark] = useState(() => {\n    try { return localStorage.getItem('tw_dark') === '1'; } catch { return false; }\n  });\n  useEffect(() => {\n    const root = document.documentElement;\n    if (dark) root.classList.add('dark'); else root.classList.remove('dark');\n    try { localStorage.setItem('tw_dark', dark ? '1' : '0'); } catch {}\n  }, [dark]);\n\n  /* ===== Data ===== */\n  useEffect(() => {\n    let stop = false;\n    (async () => {\n      try { const data = await api('/api/auth/me'); if (!stop) setMe(data); } catch {}\n    })();\n    return () => { stop = true; };\n  }, []);\n\n  async function refreshToday() {\n    setLoadingToday(true);\n    try {\n      const t = todayISO();\n      const res = await api(`/api/attendance/report?from=${t}&to=${t}`);\n      const mine = Array.isArray(res) && res.length ? res[0] : null;\n      setToday(mine || null);\n    } catch (e) {\n      setMsg({ type: 'error', title: 'שגיאה', message: e.message });\n    } finally {\n      setLoadingToday(false);\n    }\n  }\n  async function refreshReport() {\n    setLoadingReport(true);\n    try {\n      const qs = new URLSearchParams({ from, to });\n      if (userId) qs.set('userId', userId);\n      const data = await api(`/api/attendance/report?${qs.toString()}`);\n      setRows(Array.isArray(data) ? data : []);\n    } catch (e) {\n      setMsg({ type: 'error', title: 'שגיאה', message: e.message });\n    } finally {\n      setLoadingReport(false);\n    }\n  }\n  useEffect(() => { refreshToday(); }, []);\n  useEffect(() => { refreshReport(); }, [from, to, userId]);\n\n  const hasOpenShift = !!(today && today.clockIn && !today.clockOut);\n  const onBreak = useMemo(() => {\n    if (!today || !today.breaks) return false;\n    const last = today.breaks[today.breaks.length - 1];\n    return !!(last && last.start && !last.end);\n  }, [today]);\n\n  const liveMinutes = useLiveMinutes(today);\n\n  /* ===== Actions ===== */\n  async function doClockIn() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? { coords } : undefined;\n      await api('/api/attendance/clockin', { method: 'POST', body: JSON.stringify(body) });\n      setMsg({ type: 'success', title: 'Clock In בוצע' });\n      await refreshToday(); await refreshReport();\n    } catch (e) { setMsg({ type: 'error', title: 'שגיאה', message: e.message }); }\n  }\n  async function doClockOut() {\n    if (onBreak) {\n      setConfirm({\n        title: 'סגירת משמרת בזמן הפסקה',\n        body: 'יש הפסקה פתוחה. לסגור אותה ולבצע Clock Out?',\n        onConfirm: async () => {\n          try { await api('/api/attendance/break/end', { method: 'POST' }); } catch {}\n          await reallyClockOut();\n        }\n      });\n      return;\n    }\n    await reallyClockOut();\n  }\n  async function reallyClockOut() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? { coords } : undefined;\n      await api('/api/attendance/clockout', { method: 'POST', body: JSON.stringify(body) });\n      setMsg({ type: 'success', title: 'Clock Out בוצע' });\n      await refreshToday(); await refreshReport();\n    } catch (e) { setMsg({ type: 'error', title: 'שגיאה', message: e.message }); }\n  }\n  async function startBreak() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? { coords } : undefined;\n      await api('/api/attendance/break/start', { method: 'POST', body: JSON.stringify(body) });\n      setMsg({ type: 'success', title: 'הפסקה התחילה' });\n      await refreshToday(); await refreshReport();\n    } catch (e) { setMsg({ type: 'error', title: 'שגיאה', message: e.message }); }\n  }\n  async function endBreak() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? { coords } : undefined;\n      await api('/api/attendance/break/end', { method: 'POST', body: JSON.stringify(body) });\n      setMsg({ type: 'success', title: 'הפסקה הסתיימה' });\n      await refreshToday(); await refreshReport();\n    } catch (e) { setMsg({ type: 'error', title: 'שגיאה', message: e.message }); }\n  }\n\n  const totals = useMemo(() => {\n    const sum = (k) => rows.reduce((a, r) => a + (Number(r[k]) || 0), 0);\n    return { regularMinutes: sum('regularMinutes'), overtimeMinutes: sum('overtimeMinutes'), totalMinutes: sum('totalMinutes') };\n  }, [rows]);\n\n  /* ===== Edit row ===== */\n  function openEdit(row) {\n    setEditing(row);\n    setEditClockIn(toDatetimeLocalValue(row.clockIn));\n    setEditClockOut(toDatetimeLocalValue(row.clockOut));\n  }\n  async function saveEdit() {\n    if (!editing?._id) return;\n    try {\n      const payload = {};\n      if (editClockIn) payload.clockIn = new Date(editClockIn).toISOString();\n      if (editClockOut) payload.clockOut = new Date(editClockOut).toISOString();\n\n      await api(`/api/attendance/${editing._id}`, {\n        method: 'PUT',\n        body: JSON.stringify(payload),\n      });\n      setMsg({ type: 'success', title: 'רשומה עודכנה בהצלחה' });\n      setEditing(null);\n      await refreshToday(); await refreshReport();\n    } catch (e) {\n      setMsg({ type: 'error', title: 'עדכון נכשל', message: e.message });\n    }\n  }\n\n  /* ===== Exports ===== */\n  function exportCSV() {\n    const header = ['date', 'clockIn', 'clockOut', 'regularMinutes', 'overtimeMinutes', 'totalMinutes'];\n    const lines = [header.join(',')].concat(\n      rows.map(r => [\n        r.date,\n        r.clockIn ? new Date(r.clockIn).toLocaleString() : '',\n        r.clockOut ? new Date(r.clockOut).toLocaleString() : '',\n        r.regularMinutes ?? 0,\n        r.overtimeMinutes ?? 0,\n        r.totalMinutes ?? 0\n      ].join(','))\n    );\n    const blob = new Blob([lines.join('\\n')], { type: 'text/csv;charset=utf-8' });\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    const who = userId ? `user-${userId}` : (me?.name || 'me');\n    a.download = `Costoro-${who}-${from}_to_${to}.csv`;\n    a.click();\n  }\n  function exportExcel() {\n    const rows2 = rows.map(r => ({\n      Date: r.date,\n      ClockIn: r.clockIn ? new Date(r.clockIn).toLocaleString() : '',\n      ClockOut: r.clockOut ? new Date(r.clockOut).toLocaleString() : '',\n      RegularMinutes: r.regularMinutes || 0,\n      OvertimeMinutes: r.overtimeMinutes || 0,\n      TotalMinutes: r.totalMinutes || 0,\n    }));\n    const wb = XLSX.utils.book_new();\n    const ws = XLSX.utils.json_to_sheet(rows2);\n    XLSX.utils.book_append_sheet(wb, ws, 'Report');\n    const who = userId ? `user-${userId}` : (me?.name || 'me');\n    XLSX.writeFile(wb, `Costoro-${who}-${from}_to_${to}.xlsx`);\n  }\n  async function exportPDF() {\n    const doc = new jsPDF('p', 'pt');\n    const marginX = 36;\n    const lineY = 64;\n\n    doc.setFontSize(16);\n    doc.text('Costoro - Attendance Report', marginX, 30);\n    doc.setFontSize(11);\n    const who = userId ? `User: ${userId}` : (me?.name ? `User: ${me.name}` : 'User: Me');\n    doc.text(`${who}    Range: ${from} → ${to}`, marginX, 46);\n    doc.setLineWidth(0.5);\n    doc.line(marginX, lineY, 559, lineY);\n\n    try {\n      const img = await loadImage('/logo.png');\n      const cnv = document.createElement('canvas');\n      cnv.width = img.width; cnv.height = img.height;\n      const ctx = cnv.getContext('2d');\n      ctx.drawImage(img, 0, 0);\n      const base64 = cnv.toDataURL('image/png');\n      doc.addImage(base64, 'PNG', 500, 16, 56, 56);\n    } catch {}\n\n    const body = rows.map(r => [\n      r.date,\n      r.clockIn ? new Date(r.clockIn).toLocaleString() : '-',\n      r.clockOut ? new Date(r.clockOut).toLocaleString() : '-',\n      fmtMin(r.regularMinutes || 0),\n      fmtMin(r.overtimeMinutes || 0),\n      fmtMin(r.totalMinutes || 0),\n    ]);\n    doc.autoTable({\n      startY: lineY + 16,\n      head: [['תאריך', 'Clock In', 'Clock Out', 'רגיל', 'נוספות', 'סה״כ']],\n      body,\n      styles: { font: 'helvetica', fontSize: 10 },\n      headStyles: { fillColor: [20, 20, 20], textColor: [255, 255, 255] },\n      margin: { left: marginX, right: marginX }\n    });\n    const finalY = doc.lastAutoTable.finalY || (lineY + 16);\n    doc.setFontSize(11);\n    doc.text(`Totals: רגיל ${fmtMin(totals.regularMinutes)}, נוספות ${fmtMin(totals.overtimeMinutes)}, סה״כ ${fmtMin(totals.totalMinutes)}`, marginX, finalY + 24);\n    doc.save(`Costoro-${(me?.name || 'me')}-${fileDateStamp()}.pdf`);\n  }\n\n  /* ===== Presets ===== */\n  function setPreset(kind) {\n    const d = new Date();\n    const toLocalISO = (x) => {\n      const off = x.getTimezoneOffset();\n      const z = new Date(x.getTime() - off * 60000);\n      return z.toISOString().slice(0, 10);\n    };\n    if (kind === 'today') {\n      const t = toLocalISO(new Date()); setFrom(t); setTo(t);\n    } else if (kind === 'yesterday') {\n      const y = new Date(d); y.setDate(d.getDate() - 1);\n      const t = toLocalISO(y); setFrom(t); setTo(t);\n    } else if (kind === 'week') {\n      const day = d.getDay();\n      const monday = new Date(d); const sunday = new Date(d);\n      monday.setDate(d.getDate() - ((day + 6) % 7));\n      sunday.setDate(monday.getDate() + 6);\n      setFrom(toLocalISO(monday)); setTo(toLocalISO(sunday));\n    } else if (kind === 'month') {\n      const first = new Date(d.getFullYear(), d.getMonth(), 1);\n      const last = new Date(d.getFullYear(), d.getMonth() + 1, 0);\n      setFrom(toLocalISO(first)); setTo(toLocalISO(last));\n    }\n  }\n\n  function logout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    localStorage.removeItem('auth');\n    window.location.href = '/login';\n  }\n\n  /* ===== Render ===== */\n  const canEditRows = !!(me?.permissions?.attendanceEdit);\n\n  return (\n    <div className=\"page\">\n      <Toast {...(msg || {})} onClose={() => setMsg(null)} show={!!msg} />\n      {confirm && (\n        <Modal title={confirm.title} onClose={() => setConfirm(null)}>\n          <div className=\"space-y\">\n            <p>{confirm.body}</p>\n            <div className=\"row end gap\">\n              <button className=\"btn\" onClick={() => { setConfirm(null); confirm.onConfirm?.(); }}>אישור</button>\n              <button className=\"btn gray\" onClick={() => setConfirm(null)}>ביטול</button>\n            </div>\n          </div>\n        </Modal>\n      )}\n\n      {/* Edit modal */}\n      {editing && (\n        <Modal title={`עריכת יום ${toLocalDate(editing.date || editing.clockIn || Date.now())}`} onClose={() => setEditing(null)}>\n          <div className=\"space-y\">\n            <label className=\"stack\">\n              <span>Clock In</span>\n              <input className=\"input\" type=\"datetime-local\" value={editClockIn} onChange={e => setEditClockIn(e.target.value)} />\n            </label>\n            <label className=\"stack\">\n              <span>Clock Out</span>\n              <input className=\"input\" type=\"datetime-local\" value={editClockOut} onChange={e => setEditClockOut(e.target.value)} />\n            </label>\n            <div className=\"row end gap\">\n              <button className=\"btn\" onClick={saveEdit}>שמור</button>\n              <button className=\"btn gray\" onClick={() => setEditing(null)}>בטל</button>\n            </div>\n          </div>\n        </Modal>\n      )}\n\n      {/* Top bar */}\n      <div className=\"topbar\">\n        <div className=\"row gap\">\n          <button className=\"chip\" onClick={() => setDark(v => !v)}>{dark ? 'מצב בהיר' : 'מצב כהה'}</button>\n          <button className=\"chip\" onClick={() => window.open('/kiosk', '_blank')}>עמדת סריקה (QR)</button>\n          {me?.role === 'admin' && (\n            <button className=\"chip\" onClick={() => (window.location.href = '/admin/users')}>ניהול משתמשים</button>\n          )}\n        </div>\n        <div className=\"row gap\">\n          <div className=\"clock\">{new Date().toLocaleTimeString()}</div>\n          <div className=\"userbox\">\n            <img src=\"/logo.png\" alt=\"Logo\" />\n            <div>\n              <div className=\"name\">שלום {me?.name || '...'}</div>\n              <div className=\"email\">{me?.email || ''}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Grid */}\n      <div className=\"grid\">\n        {/* Report (left) */}\n        <section className=\"card\">\n          <div className=\"card-head\">\n            <h2>דוח לפי תאריכים</h2>\n            <div className=\"row gap\">\n              <a className=\"link\" onClick={exportCSV}>CSV</a>\n              <a className=\"link\" onClick={exportExcel}>Excel</a>\n              <a className=\"link\" onClick={exportPDF}>PDF</a>\n            </div>\n          </div>\n\n          <div className=\"filters\">\n            <div className=\"row gap wrap\">\n              <select className=\"input\" value={userId} onChange={(e) => setUserId(e.target.value)}>\n                <option value=\"\">— כול/ה את עצמי —</option>\n              </select>\n              <input className=\"input\" type=\"date\" value={from} onChange={(e) => setFrom(e.target.value)} />\n              <span>עד</span>\n              <input className=\"input\" type=\"date\" value={to} onChange={(e) => setTo(e.target.value)} />\n              <div className=\"row gap\">\n                <button className=\"chip\" onClick={() => setPreset('today')}>היום</button>\n                <button className=\"chip\" onClick={() => setPreset('yesterday')}>אתמול</button>\n                <button className=\"chip\" onClick={() => setPreset('week')}>השבוע</button>\n                <button className=\"chip\" onClick={() => setPreset('month')}>החודש</button>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"table-wrap\">\n            <table className=\"table\">\n              <thead>\n                <tr>\n                  <th>תאריך</th>\n                  <th>Clock In</th>\n                  <th>Clock Out</th>\n                  <th>רגיל</th>\n                  <th>נוספות</th>\n                  <th>ס״כ</th>\n                  <th></th>\n                </tr>\n              </thead>\n              <tbody>\n                {loadingReport ? (\n                  Array.from({ length: 6 }).map((_, i) => (\n                    <tr key={i}><td colSpan=\"7\"><div className=\"skeleton\"/></td></tr>\n                  ))\n                ) : (\n                  rows.map((r) => (\n                    <tr key={r._id || r.date}>\n                      <td className=\"ltr\">{r.date}</td>\n                      <td className=\"ltr\">{r.clockIn ? toLocalTime(r.clockIn) : '-'}</td>\n                      <td className=\"ltr\">{r.clockOut ? toLocalTime(r.clockOut) : '-'}</td>\n                      <td className=\"ltr\">{fmtMin(r.regularMinutes || 0)}</td>\n                      <td className=\"ltr\">{fmtMin(r.overtimeMinutes || 0)}</td>\n                      <td className=\"ltr\">{fmtMin(r.totalMinutes || 0)}</td>\n                      <td>\n                        <button\n                          className=\"btn tiny\"\n                          disabled={!canEditRows || !r._id}\n                          onClick={() => openEdit(r)}\n                          title={!canEditRows ? 'אין הרשאה לעריכה' : 'ערוך'}\n                        >\n                          ערוך\n                        </button>\n                      </td>\n                    </tr>\n                  ))\n                )}\n              </tbody>\n              {!loadingReport && (\n                <tfoot>\n                  <tr>\n                    <td>סיכום</td>\n                    <td></td><td></td>\n                    <td className=\"ltr\">{fmtMin(totals.regularMinutes)}</td>\n                    <td className=\"ltr\">{fmtMin(totals.overtimeMinutes)}</td>\n                    <td className=\"ltr\">{fmtMin(totals.totalMinutes)}</td>\n                    <td></td>\n                  </tr>\n                </tfoot>\n              )}\n            </table>\n          </div>\n        </section>\n\n        {/* Today (right) */}\n        <section className=\"card\">\n          <div className=\"card-head\">\n            <h2>היום</h2>\n            <div className=\"muted\">{today ? today.date : todayISO()}</div>\n          </div>\n\n          <div className=\"row gap wrap end mb\">\n            <button className=\"btn\" disabled={hasOpenShift} onClick={doClockIn}>Clock In</button>\n            <button className=\"btn gray\" disabled={!hasOpenShift || onBreak} onClick={startBreak}>Start Break</button>\n            <button className=\"btn gray\" disabled={!onBreak} onClick={endBreak}>End Break</button>\n            <button className=\"btn gray\" disabled={!hasOpenShift} onClick={doClockOut}>Clock Out</button>\n          </div>\n\n          {loadingToday ? (\n            <div className=\"skeleton big\" />\n          ) : !today ? (\n            <div className=\"muted\">לא במשמרת</div>\n          ) : (\n            <div className=\"two\">\n              <div className=\"stack\">\n                <div><b>Clock In:</b> <span className=\"ltr\">{today.clockIn ? toLocalTime(today.clockIn) : '-'}</span></div>\n                <div><b>Clock Out:</b> <span className=\"ltr\">{today.clockOut ? toLocalTime(today.clockOut) : '-'}</span></div>\n                <div><b>סה״כ (חי):</b> <span className=\"ltr\">{fmtMin(liveMinutes)}</span></div>\n                <div><b>רגיל:</b> <span className=\"ltr\">{fmtMin(today.regularMinutes || 0)}</span></div>\n                <div><b>נוספות:</b> <span className=\"ltr\">{fmtMin(today.overtimeMinutes || 0)}</span></div>\n              </div>\n              <div className=\"stack\">\n                <div className=\"b\">הפסקות:</div>\n                <ul className=\"bullets\">\n                  {(today.breaks || []).map((b, i) => (\n                    <li key={i} className=\"ltr\">\n                      {b.start ? toLocalTime(b.start) : '-'} → {b.end ? toLocalTime(b.end) : '—'}\n                    </li>\n                  ))}\n                  {!today.breaks?.length && <li>—</li>}\n                </ul>\n              </div>\n            </div>\n          )}\n        </section>\n      </div>\n\n      <div className=\"footer\">\n        <button className=\"btn gray\" onClick={logout}>התנתק</button>\n        <div className=\"muted\">© Costoro {new Date().getFullYear()}</div>\n      </div>\n\n      {/* ===== Local Styles (RTL + Dark) ===== */}\n      <style>{`\n        :root { --bg:#f4f7fb; --fg:#0f172a; --muted:#6b7280; --card:#ffffff; --border:#e5e7eb; --chip:#eef2f7; --chip-fg:#0f172a; --accent:#111; }\n        html.dark { --bg:#0f172a; --fg:#e5e7eb; --muted:#93a1b5; --card:#111827; --border:#273043; --chip:#1f2937; --chip-fg:#e5e7eb; --accent:#f8fafc; }\n        html, body, #root { height:100%; }\n        body { background:var(--bg); color:var(--fg); }\n        .page { min-height:100vh; display:flex; flex-direction:column; gap:16px; }\n        .topbar { display:flex; justify-content:space-between; align-items:center; padding:14px 16px; }\n        .row { display:flex; align-items:center; }\n        .row.end { justify-content:flex-end; }\n        .row.wrap { flex-wrap:wrap; }\n        .gap { gap:10px; }\n        .mb { margin-bottom:10px; }\n        .clock { background:#000; color:#fff; border-radius:999px; padding:4px 10px; font-size:12px; }\n        .userbox { display:flex; gap:10px; align-items:center; }\n        .userbox img { width:32px; height:32px; border-radius:6px; }\n        .userbox .name { font-weight:700; font-size:14px; }\n        .userbox .email { font-size:12px; color:var(--muted); }\n        .chip { background:var(--chip); color:var(--chip-fg); border:1px solid var(--border); border-radius:10px; padding:6px 10px; font-size:13px; }\n        .grid { display:grid; grid-template-columns:1fr 1fr; gap:16px; padding:0 16px 20px; }\n        @media (max-width: 1024px){ .grid{ grid-template-columns:1fr; } }\n        .card { background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:0 1px 2px rgba(0,0,0,.03); padding:14px; color:var(--fg); }\n        .card * { color: inherit; } /* מבטיח טקסט בהיר במצב כהה גם בתוך רכיבים פנימיים */\n        .card-head { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }\n        .card-head h2 { margin:0; font-size:18px; }\n        .muted { color:var(--muted); font-size:13px; }\n        .filters { padding:8px 0; border-top:1px solid var(--border); border-bottom:1px solid var(--border); margin-bottom:10px; }\n        .input { border:1px solid var(--border); background:transparent; color:var(--fg); border-radius:10px; padding:6px 10px; font-size:14px; }\n        .btn { background:#111; color:#fff; border:none; border-radius:10px; padding:8px 14px; font-weight:600; }\n        .btn.gray { background:var(--chip); color:var(--chip-fg); border:1px solid var(--border); }\n        .btn.tiny { padding:4px 8px; font-size:12px; }\n        .btn[disabled]{ opacity:.45; cursor:not-allowed; }\n        .link { text-decoration:underline; cursor:pointer; color:var(--fg); opacity:.9; }\n        .table-wrap { max-height:480px; overflow:auto; border:1px solid var(--border); border-radius:10px; }\n        .table { width:100%; border-collapse:separate; border-spacing:0; direction:rtl; }\n        .table thead th, .table tbody td, .table tfoot td { color:var(--fg); }\n        .table thead th { position:sticky; top:0; background:var(--chip); color:var(--chip-fg); text-align:right; padding:10px; border-bottom:1px solid var(--border); font-weight:700; }\n        .table tbody td { padding:10px; border-bottom:1px solid var(--border); }\n        .table tbody tr:nth-child(even){ background:rgba(255,255,255,.03); }\n        html.dark .table tbody tr:nth-child(even){ background:rgba(255,255,255,.04); }\n        .table tfoot td { padding:10px; background:var(--chip); color:var(--chip-fg); font-weight:700; position:sticky; bottom:0; }\n        .skeleton { height:36px; background:linear-gradient(90deg, rgba(0,0,0,.06), rgba(0,0,0,.02), rgba(0,0,0,.06)); animation:s 1.4s infinite; border-radius:8px; }\n        .skeleton.big { height:120px; }\n        @keyframes s { 0%{background-position:-200px 0} 100%{background-position:200px 0} }\n        .two { display:grid; grid-template-columns:1fr 1fr; gap:14px; }\n        @media (max-width: 680px){ .two{ grid-template-columns:1fr; } }\n        .stack { display:flex; flex-direction:column; gap:6px; }\n        .b { font-weight:700; }\n        .bullets { margin:0; padding-right:18px; }\n        .bullets li { margin:4px 0; }\n        .footer { padding:12px 16px; display:flex; justify-content:space-between; align-items:center; }\n        .ltr { direction:ltr; unicode-bidi:bidi-override; } /* מספרים ותאריכים ישרים ב־RTL */\n      `}</style>\n    </div>\n  );\n}\n\n/* ===== Hooks ===== */\nfunction useLiveMinutes(today) {\n  const [min, setMin] = useState(0);\n  useEffect(() => {\n    function calc() {\n      if (!today || !today.clockIn) return setMin(0);\n      const start = new Date(today.clockIn).getTime();\n      let now = Date.now();\n      let workingMs = now - start;\n      const breaks = Array.isArray(today.breaks) ? today.breaks : [];\n      for (const b of breaks) {\n        const s = b.start ? new Date(b.start).getTime() : null;\n        const e = b.end ? new Date(b.end).getTime() : null;\n        if (s) {\n          if (e) workingMs -= Math.max(0, e - s);\n          else workingMs -= Math.max(0, now - s);\n        }\n      }\n      setMin(Math.max(0, Math.floor(workingMs / 60000)));\n    }\n    calc();\n    const t = setInterval(calc, 1000);\n    return () => clearInterval(t);\n  }, [today?.clockIn, JSON.stringify(today?.breaks || [])]);\n  return min;\n}\n\nfunction loadImage(src) {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n    img.src = src;\n  });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}