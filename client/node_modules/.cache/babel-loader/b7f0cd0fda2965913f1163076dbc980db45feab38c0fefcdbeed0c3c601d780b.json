{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\timewatch-clone\\\\client\\\\src\\\\pages\\\\Dashboard.js\",\n  _s = $RefreshSig$();\n// client/src/pages/Dashboard.js\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { api } from '../api';\nimport Toast from '../components/Toast';\nimport jsPDF from 'jspdf';\nimport 'jspdf-autotable';\nimport * as XLSX from 'xlsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction fmtMin(n) {\n  const h = Math.floor(n / 60);\n  const m = n % 60;\n  return `${h}ש ${m}ד`;\n}\nfunction todayISO() {\n  const d = new Date();\n  const off = d.getTimezoneOffset();\n  const z = new Date(d.getTime() - off * 60000);\n  return z.toISOString().slice(0, 10);\n}\nasync function getGeo() {\n  if (!('geolocation' in navigator)) return null;\n  return new Promise(resolve => {\n    navigator.geolocation.getCurrentPosition(pos => resolve({\n      lat: pos.coords.latitude,\n      lng: pos.coords.longitude\n    }), () => resolve(null), {\n      enableHighAccuracy: false,\n      timeout: 3000,\n      maximumAge: 60000\n    });\n  });\n}\nexport default function Dashboard() {\n  _s();\n  var _me$permissions2, _me$permissions3, _me$permissions4;\n  const [me, setMe] = useState(null);\n  const [today, setToday] = useState(null);\n  const [err, setErr] = useState('');\n  const [range, setRange] = useState({\n    from: todayISO(),\n    to: todayISO()\n  });\n  const [rows, setRows] = useState([]);\n  const [busy, setBusy] = useState(false);\n  const [toast, setToast] = useState({\n    show: false,\n    type: 'success',\n    title: '',\n    message: ''\n  });\n  const showToast = (type, title, message = '') => setToast({\n    show: true,\n    type,\n    title,\n    message\n  });\n  const closeToast = () => setToast(t => ({\n    ...t,\n    show: false\n  }));\n  const [clock, setClock] = useState(new Date());\n  useEffect(() => {\n    const t = setInterval(() => setClock(new Date()), 1000);\n    return () => clearInterval(t);\n  }, []);\n  const timeText = useMemo(() => clock.toLocaleTimeString(), [clock]);\n  useEffect(() => {\n    (async () => {\n      const m = await api('/api/auth/me');\n      setMe(m.user);\n      await refreshToday();\n      await loadReportBy(range.from, range.to);\n    })().catch(e => setErr(e.message));\n  }, []); // אל תשכח להשאיר ריק כדי שלא ירוץ בלופ\n\n  async function refreshToday() {\n    setErr('');\n    const d = todayISO();\n    const data = await api(`/api/attendance/report?from=${d}&to=${d}`);\n    setToday(data[0] || null);\n  }\n  async function doPost(path, okMsg, errMsg) {\n    if (busy) return;\n    setBusy(true);\n    setErr('');\n    try {\n      const geo = await getGeo();\n      await api(path, {\n        method: 'POST',\n        body: JSON.stringify(geo || {})\n      });\n      await refreshToday();\n      showToast('success', okMsg);\n    } catch (e) {\n      setErr(e.message);\n      showToast('error', errMsg || e.message);\n    } finally {\n      setBusy(false);\n    }\n  }\n  async function loadReport(e) {\n    var _e$preventDefault;\n    e === null || e === void 0 ? void 0 : (_e$preventDefault = e.preventDefault) === null || _e$preventDefault === void 0 ? void 0 : _e$preventDefault.call(e);\n    await loadReportBy(range.from, range.to);\n  }\n  async function loadReportBy(from, to) {\n    setErr('');\n    try {\n      const params = new URLSearchParams({\n        from,\n        to\n      }).toString();\n      const data = await api(`/api/attendance/report?${params}`);\n      setRows(data);\n    } catch (e) {\n      setErr(e.message);\n    }\n  }\n  function logout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    window.location.href = '/login';\n  }\n\n  // ======= Exporters =======\n  function exportCSV() {\n    const header = ['date', 'clockIn', 'clockOut', 'regularMinutes', 'overtimeMinutes', 'totalMinutes'];\n    const lines = [header.join(',')].concat(rows.map(r => {\n      var _r$regularMinutes, _r$overtimeMinutes, _r$totalMinutes;\n      return [r.date, r.clockIn ? new Date(r.clockIn).toLocaleTimeString() : '', r.clockOut ? new Date(r.clockOut).toLocaleTimeString() : '', (_r$regularMinutes = r.regularMinutes) !== null && _r$regularMinutes !== void 0 ? _r$regularMinutes : '', (_r$overtimeMinutes = r.overtimeMinutes) !== null && _r$overtimeMinutes !== void 0 ? _r$overtimeMinutes : '', (_r$totalMinutes = r.totalMinutes) !== null && _r$totalMinutes !== void 0 ? _r$totalMinutes : ''].join(',');\n    }));\n    const blob = new Blob([lines.join('\\n')], {\n      type: 'text/csv;charset=utf-8;'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `attendance_${range.from}_${range.to}.csv`;\n    document.body.appendChild(a);\n    a.click();\n    a.remove();\n    URL.revokeObjectURL(url);\n    showToast('success', 'CSV נוצר בהצלחה');\n  }\n  function exportXLSX() {\n    const data = rows.map(r => ({\n      Date: r.date,\n      ClockIn: r.clockIn ? new Date(r.clockIn).toLocaleTimeString() : '',\n      ClockOut: r.clockOut ? new Date(r.clockOut).toLocaleTimeString() : '',\n      Regular: r.regularMinutes ? fmtMin(r.regularMinutes) : '',\n      Overtime: r.overtimeMinutes ? fmtMin(r.overtimeMinutes) : '',\n      Total: r.totalMinutes ? fmtMin(r.totalMinutes) : ''\n    }));\n    const ws = XLSX.utils.json_to_sheet(data);\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, 'Report');\n    XLSX.writeFile(wb, `attendance_${range.from}_${range.to}.xlsx`);\n    showToast('success', 'Excel נוצר בהצלחה');\n  }\n  function exportPDF() {\n    const doc = new jsPDF({\n      orientation: 'p',\n      unit: 'pt',\n      format: 'a4'\n    });\n    doc.setFontSize(14);\n    doc.text(`Attendance Report ${range.from} - ${range.to}`, 40, 40);\n    const table = rows.map(r => [r.date, r.clockIn ? new Date(r.clockIn).toLocaleTimeString() : '-', r.clockOut ? new Date(r.clockOut).toLocaleTimeString() : '-', r.regularMinutes ? fmtMin(r.regularMinutes) : '-', r.overtimeMinutes ? fmtMin(r.overtimeMinutes) : '-', r.totalMinutes ? fmtMin(r.totalMinutes) : '-']);\n    doc.autoTable({\n      head: [['Date', 'Clock In', 'Clock Out', 'Regular', 'Overtime', 'Total']],\n      body: table,\n      startY: 60\n    });\n    const y = doc.lastAutoTable.finalY + 30;\n    doc.setFontSize(12);\n    doc.text('Approved by:', 40, y);\n    doc.line(120, y + 2, 300, y + 2);\n    doc.text('(Signature)', 120, y + 18);\n    doc.text(`Generated: ${new Date().toLocaleString()}`, 40, y + 40);\n    doc.save(`attendance_${range.from}_${range.to}.pdf`);\n    showToast('success', 'PDF נשמר');\n  }\n\n  // אדמין/מורשה: עריכת רשומה מטבלת הדוח\n  async function editRow(r) {\n    var _me$permissions;\n    if (!(me !== null && me !== void 0 && (_me$permissions = me.permissions) !== null && _me$permissions !== void 0 && _me$permissions.attendanceEdit)) return;\n    const ci = prompt('Clock In חדש (ISO או YYYY-MM-DD HH:MM):', r.clockIn ? new Date(r.clockIn).toISOString().slice(0, 16).replace('T', ' ') : '');\n    const co = prompt('Clock Out חדש (ISO או YYYY-MM-DD HH:MM):', r.clockOut ? new Date(r.clockOut).toISOString().slice(0, 16).replace('T', ' ') : '');\n    const toISO = s => {\n      if (!s) return null;\n      const d = new Date(s.replace(' ', 'T'));\n      return isNaN(d) ? null : d.toISOString();\n    };\n    const body = {};\n    const ciISO = toISO(ci);\n    const coISO = toISO(co);\n    if (ciISO) body.clockIn = ciISO;\n    if (coISO) body.clockOut = coISO;\n    try {\n      await api(`/api/attendance/${r._id}`, {\n        method: 'PUT',\n        body: JSON.stringify(body)\n      });\n      await loadReportBy(range.from, range.to);\n      await refreshToday();\n      showToast('success', 'עודכן בהצלחה');\n    } catch (e) {\n      showToast('error', e.message);\n    }\n  }\n  const inShift = !!(today !== null && today !== void 0 && today.clockIn) && !(today !== null && today !== void 0 && today.clockOut);\n  const hasOpenBreak = !!((today === null || today === void 0 ? void 0 : today.breaks) || []).find(b => b.start && !b.end);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen p-4\",\n    children: [/*#__PURE__*/_jsxDEV(Toast, {\n      show: toast.show,\n      type: toast.type,\n      title: toast.title,\n      message: toast.message,\n      onClose: closeToast\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"flex items-center justify-between mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/logo.png\",\n          alt: \"Costoro\",\n          className: \"w-10 h-10 rounded-md\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-semibold text-lg\",\n            children: [\"\\u05E9\\u05DC\\u05D5\\u05DD \", (me === null || me === void 0 ? void 0 : me.name) || '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-slate-500\",\n            children: me === null || me === void 0 ? void 0 : me.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-3\",\n        children: [(me === null || me === void 0 ? void 0 : (_me$permissions2 = me.permissions) === null || _me$permissions2 === void 0 ? void 0 : _me$permissions2.manageUsers) && /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/admin/users\",\n          className: \"px-3 py-2 rounded-xl bg-white border shadow text-sm\",\n          children: \"\\u05E0\\u05D9\\u05D4\\u05D5\\u05DC \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9\\u05D9\\u05DD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `px-3 py-1 rounded-xl text-white text-sm ${hasOpenBreak ? 'bg-amber-500' : inShift ? 'bg-emerald-600' : 'bg-slate-400'}`,\n          children: hasOpenBreak ? 'בהפסקה' : inShift ? 'במשמרת' : 'לא במשמרת'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-3 py-1 rounded-xl bg-white shadow text-sm\",\n          children: timeText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: logout,\n          className: \"px-4 py-2 rounded-xl border bg-white hover:bg-slate-50\",\n          children: \"\\u05D4\\u05EA\\u05E0\\u05EA\\u05E7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4 text-rose-600\",\n      children: err\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"grid md:grid-cols-2 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow p-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold\",\n            children: \"\\u05D3\\u05D5\\u05D7 \\u05DC\\u05E4\\u05D9 \\u05EA\\u05D0\\u05E8\\u05D9\\u05DB\\u05D9\\u05DD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this), (me === null || me === void 0 ? void 0 : (_me$permissions3 = me.permissions) === null || _me$permissions3 === void 0 ? void 0 : _me$permissions3.exportReports) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-3 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportCSV,\n              className: \"underline\",\n              children: \"CSV\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportXLSX,\n              className: \"underline\",\n              children: \"Excel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportPDF,\n              className: \"underline\",\n              children: \"PDF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: loadReport,\n          className: \"flex items-end gap-3 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm mb-1\",\n              children: \"\\u05DE\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              className: \"border rounded-xl px-3 py-2\",\n              value: range.from,\n              onChange: e => setRange(v => ({\n                ...v,\n                from: e.target.value\n              })),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm mb-1\",\n              children: \"\\u05E2\\u05D3 \\u05EA\\u05D0\\u05E8\\u05D9\\u05DA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              className: \"border rounded-xl px-3 py-2\",\n              value: range.to,\n              onChange: e => setRange(v => ({\n                ...v,\n                to: e.target.value\n              })),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            type: \"submit\",\n            disabled: busy,\n            children: \"\\u05D8\\u05E2\\u05DF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"min-w-full text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"text-left border-b\",\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-2\",\n                  children: \"\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-2\",\n                  children: \"Clock In\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-2\",\n                  children: \"Clock Out\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-2\",\n                  children: \"\\u05E8\\u05D2\\u05D9\\u05DC\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 341,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-2\",\n                  children: \"\\u05E0\\u05D5\\u05E1\\u05E4\\u05D5\\u05EA\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-2\",\n                  children: \"\\u05E1\\u05D4\\u05F4\\u05DB\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 19\n                }, this), (me === null || me === void 0 ? void 0 : (_me$permissions4 = me.permissions) === null || _me$permissions4 === void 0 ? void 0 : _me$permissions4.attendanceEdit) && /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 344,\n                  columnNumber: 55\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: [rows.map(r => {\n                var _me$permissions5;\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"border-b\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-2\",\n                    children: r.date\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 350,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-2\",\n                    children: r.clockIn ? new Date(r.clockIn).toLocaleTimeString() : '-'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 351,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-2\",\n                    children: r.clockOut ? new Date(r.clockOut).toLocaleTimeString() : '-'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 356,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-2\",\n                    children: r.regularMinutes ? fmtMin(r.regularMinutes) : '-'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 361,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-2\",\n                    children: r.overtimeMinutes ? fmtMin(r.overtimeMinutes) : '-'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 364,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-2\",\n                    children: r.totalMinutes ? fmtMin(r.totalMinutes) : '-'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 367,\n                    columnNumber: 21\n                  }, this), (me === null || me === void 0 ? void 0 : (_me$permissions5 = me.permissions) === null || _me$permissions5 === void 0 ? void 0 : _me$permissions5.attendanceEdit) && /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-2\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"px-3 py-1 rounded-xl border\",\n                      onClick: () => editRow(r),\n                      children: \"\\u05E2\\u05E8\\u05D5\\u05DA\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 372,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 371,\n                    columnNumber: 23\n                  }, this)]\n                }, r._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 19\n                }, this);\n              }), !rows.length && /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-4 text-slate-400\",\n                  colSpan: 7,\n                  children: \"\\u05D0\\u05D9\\u05DF \\u05E0\\u05EA\\u05D5\\u05E0\\u05D9\\u05DD \\u05DC\\u05EA\\u05E7\\u05D5\\u05E4\\u05D4 \\u05D6\\u05D5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 384,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow p-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold\",\n            children: \"\\u05D4\\u05D9\\u05D5\\u05DD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-slate-500\",\n            children: inShift ? 'במשמרת פעילה' : 'לא במשמרת'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2 flex-wrap mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            disabled: busy || inShift,\n            onClick: () => doPost('/api/attendance/clockin', 'Clock In בוצע!'),\n            children: \"Clock In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            disabled: busy || !inShift,\n            onClick: () => doPost('/api/attendance/clockout', 'Clock Out בוצע!'),\n            children: \"Clock Out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            disabled: busy || !inShift || hasOpenBreak,\n            onClick: () => doPost('/api/attendance/break/start', 'הפסקה התחילה'),\n            children: \"Start Break\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            disabled: busy || !inShift || !hasOpenBreak,\n            onClick: () => doPost('/api/attendance/break/end', 'הפסקה הסתיימה'),\n            children: \"End Break\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Clock In:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 15\n            }, this), ' ', today !== null && today !== void 0 && today.clockIn ? new Date(today.clockIn).toLocaleTimeString() : '-']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Clock Out:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 15\n            }, this), ' ', today !== null && today !== void 0 && today.clockOut ? new Date(today.clockOut).toLocaleTimeString() : '-']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"\\u05E1\\u05D4\\u05F4\\u05DB:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 15\n            }, this), ' ', today !== null && today !== void 0 && today.totalMinutes ? fmtMin(today.totalMinutes) : '-']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"\\u05E8\\u05D2\\u05D9\\u05DC:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 15\n            }, this), ' ', today !== null && today !== void 0 && today.regularMinutes ? fmtMin(today.regularMinutes) : '-']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"\\u05E0\\u05D5\\u05E1\\u05E4\\u05D5\\u05EA:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 15\n            }, this), ' ', today !== null && today !== void 0 && today.overtimeMinutes ? fmtMin(today.overtimeMinutes) : '-']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"\\u05D4\\u05E4\\u05E1\\u05E7\\u05D5\\u05EA:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-disc pr-5\",\n              children: ((today === null || today === void 0 ? void 0 : today.breaks) || []).map((b, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [b.start ? new Date(b.start).toLocaleTimeString() : '-', ' ', \"\\u2192\", ' ', b.end ? new Date(b.end).toLocaleTimeString() : '—']\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 469,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `.btn{background:black;color:white;border-radius:0.75rem;padding:0.6rem 1rem}\n      .btn[disabled]{opacity:.4;cursor:not-allowed}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 233,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"A4/1jUh24zeBJcd5C8Z1qj3jPfQ=\");\n_c = Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","useMemo","api","Toast","jsPDF","XLSX","jsxDEV","_jsxDEV","fmtMin","n","h","Math","floor","m","todayISO","d","Date","off","getTimezoneOffset","z","getTime","toISOString","slice","getGeo","navigator","Promise","resolve","geolocation","getCurrentPosition","pos","lat","coords","latitude","lng","longitude","enableHighAccuracy","timeout","maximumAge","Dashboard","_s","_me$permissions2","_me$permissions3","_me$permissions4","me","setMe","today","setToday","err","setErr","range","setRange","from","to","rows","setRows","busy","setBusy","toast","setToast","show","type","title","message","showToast","closeToast","t","clock","setClock","setInterval","clearInterval","timeText","toLocaleTimeString","user","refreshToday","loadReportBy","catch","e","data","doPost","path","okMsg","errMsg","geo","method","body","JSON","stringify","loadReport","_e$preventDefault","preventDefault","call","params","URLSearchParams","toString","logout","localStorage","removeItem","window","location","href","exportCSV","header","lines","join","concat","map","r","_r$regularMinutes","_r$overtimeMinutes","_r$totalMinutes","date","clockIn","clockOut","regularMinutes","overtimeMinutes","totalMinutes","blob","Blob","url","URL","createObjectURL","a","document","createElement","download","appendChild","click","remove","revokeObjectURL","exportXLSX","ClockIn","ClockOut","Regular","Overtime","Total","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","writeFile","exportPDF","doc","orientation","unit","format","setFontSize","text","table","autoTable","head","startY","y","lastAutoTable","finalY","line","toLocaleString","save","editRow","_me$permissions","permissions","attendanceEdit","ci","prompt","replace","co","toISO","s","isNaN","ciISO","coISO","_id","inShift","hasOpenBreak","breaks","find","b","start","end","className","children","onClose","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","name","email","manageUsers","onClick","exportReports","onSubmit","value","onChange","v","target","required","disabled","_me$permissions5","length","colSpan","i","_c","$RefreshReg$"],"sources":["C:/Users/user/Desktop/timewatch-clone/client/src/pages/Dashboard.js"],"sourcesContent":["// client/src/pages/Dashboard.js\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { api } from '../api';\nimport Toast from '../components/Toast';\nimport jsPDF from 'jspdf';\nimport 'jspdf-autotable';\nimport * as XLSX from 'xlsx';\n\nfunction fmtMin(n) {\n  const h = Math.floor(n / 60);\n  const m = n % 60;\n  return `${h}ש ${m}ד`;\n}\nfunction todayISO() {\n  const d = new Date();\n  const off = d.getTimezoneOffset();\n  const z = new Date(d.getTime() - off * 60000);\n  return z.toISOString().slice(0, 10);\n}\nasync function getGeo() {\n  if (!('geolocation' in navigator)) return null;\n  return new Promise((resolve) => {\n    navigator.geolocation.getCurrentPosition(\n      (pos) =>\n        resolve({ lat: pos.coords.latitude, lng: pos.coords.longitude }),\n      () => resolve(null),\n      { enableHighAccuracy: false, timeout: 3000, maximumAge: 60000 }\n    );\n  });\n}\n\nexport default function Dashboard() {\n  const [me, setMe] = useState(null);\n  const [today, setToday] = useState(null);\n  const [err, setErr] = useState('');\n  const [range, setRange] = useState({ from: todayISO(), to: todayISO() });\n  const [rows, setRows] = useState([]);\n\n  const [busy, setBusy] = useState(false);\n  const [toast, setToast] = useState({\n    show: false,\n    type: 'success',\n    title: '',\n    message: '',\n  });\n  const showToast = (type, title, message = '') =>\n    setToast({ show: true, type, title, message });\n  const closeToast = () => setToast((t) => ({ ...t, show: false }));\n\n  const [clock, setClock] = useState(new Date());\n  useEffect(() => {\n    const t = setInterval(() => setClock(new Date()), 1000);\n    return () => clearInterval(t);\n  }, []);\n  const timeText = useMemo(() => clock.toLocaleTimeString(), [clock]);\n\n  useEffect(() => {\n    (async () => {\n      const m = await api('/api/auth/me');\n      setMe(m.user);\n      await refreshToday();\n      await loadReportBy(range.from, range.to);\n    })().catch((e) => setErr(e.message));\n  }, []); // אל תשכח להשאיר ריק כדי שלא ירוץ בלופ\n\n  async function refreshToday() {\n    setErr('');\n    const d = todayISO();\n    const data = await api(`/api/attendance/report?from=${d}&to=${d}`);\n    setToday(data[0] || null);\n  }\n\n  async function doPost(path, okMsg, errMsg) {\n    if (busy) return;\n    setBusy(true);\n    setErr('');\n    try {\n      const geo = await getGeo();\n      await api(path, { method: 'POST', body: JSON.stringify(geo || {}) });\n      await refreshToday();\n      showToast('success', okMsg);\n    } catch (e) {\n      setErr(e.message);\n      showToast('error', errMsg || e.message);\n    } finally {\n      setBusy(false);\n    }\n  }\n\n  async function loadReport(e) {\n    e?.preventDefault?.();\n    await loadReportBy(range.from, range.to);\n  }\n\n  async function loadReportBy(from, to) {\n    setErr('');\n    try {\n      const params = new URLSearchParams({ from, to }).toString();\n      const data = await api(`/api/attendance/report?${params}`);\n      setRows(data);\n    } catch (e) {\n      setErr(e.message);\n    }\n  }\n\n  function logout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    window.location.href = '/login';\n  }\n\n  // ======= Exporters =======\n  function exportCSV() {\n    const header = [\n      'date',\n      'clockIn',\n      'clockOut',\n      'regularMinutes',\n      'overtimeMinutes',\n      'totalMinutes',\n    ];\n    const lines = [header.join(',')].concat(\n      rows.map((r) =>\n        [\n          r.date,\n          r.clockIn ? new Date(r.clockIn).toLocaleTimeString() : '',\n          r.clockOut ? new Date(r.clockOut).toLocaleTimeString() : '',\n          r.regularMinutes ?? '',\n          r.overtimeMinutes ?? '',\n          r.totalMinutes ?? '',\n        ].join(',')\n      )\n    );\n    const blob = new Blob([lines.join('\\n')], {\n      type: 'text/csv;charset=utf-8;',\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `attendance_${range.from}_${range.to}.csv`;\n    document.body.appendChild(a);\n    a.click();\n    a.remove();\n    URL.revokeObjectURL(url);\n    showToast('success', 'CSV נוצר בהצלחה');\n  }\n\n  function exportXLSX() {\n    const data = rows.map((r) => ({\n      Date: r.date,\n      ClockIn: r.clockIn ? new Date(r.clockIn).toLocaleTimeString() : '',\n      ClockOut: r.clockOut ? new Date(r.clockOut).toLocaleTimeString() : '',\n      Regular: r.regularMinutes ? fmtMin(r.regularMinutes) : '',\n      Overtime: r.overtimeMinutes ? fmtMin(r.overtimeMinutes) : '',\n      Total: r.totalMinutes ? fmtMin(r.totalMinutes) : '',\n    }));\n    const ws = XLSX.utils.json_to_sheet(data);\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, 'Report');\n    XLSX.writeFile(wb, `attendance_${range.from}_${range.to}.xlsx`);\n    showToast('success', 'Excel נוצר בהצלחה');\n  }\n\n  function exportPDF() {\n    const doc = new jsPDF({ orientation: 'p', unit: 'pt', format: 'a4' });\n    doc.setFontSize(14);\n    doc.text(`Attendance Report ${range.from} - ${range.to}`, 40, 40);\n    const table = rows.map((r) => [\n      r.date,\n      r.clockIn ? new Date(r.clockIn).toLocaleTimeString() : '-',\n      r.clockOut ? new Date(r.clockOut).toLocaleTimeString() : '-',\n      r.regularMinutes ? fmtMin(r.regularMinutes) : '-',\n      r.overtimeMinutes ? fmtMin(r.overtimeMinutes) : '-',\n      r.totalMinutes ? fmtMin(r.totalMinutes) : '-',\n    ]);\n    doc.autoTable({\n      head: [['Date', 'Clock In', 'Clock Out', 'Regular', 'Overtime', 'Total']],\n      body: table,\n      startY: 60,\n    });\n    const y = doc.lastAutoTable.finalY + 30;\n    doc.setFontSize(12);\n    doc.text('Approved by:', 40, y);\n    doc.line(120, y + 2, 300, y + 2);\n    doc.text('(Signature)', 120, y + 18);\n    doc.text(`Generated: ${new Date().toLocaleString()}`, 40, y + 40);\n    doc.save(`attendance_${range.from}_${range.to}.pdf`);\n    showToast('success', 'PDF נשמר');\n  }\n\n  // אדמין/מורשה: עריכת רשומה מטבלת הדוח\n  async function editRow(r) {\n    if (!me?.permissions?.attendanceEdit) return;\n    const ci = prompt(\n      'Clock In חדש (ISO או YYYY-MM-DD HH:MM):',\n      r.clockIn\n        ? new Date(r.clockIn).toISOString().slice(0, 16).replace('T', ' ')\n        : ''\n    );\n    const co = prompt(\n      'Clock Out חדש (ISO או YYYY-MM-DD HH:MM):',\n      r.clockOut\n        ? new Date(r.clockOut).toISOString().slice(0, 16).replace('T', ' ')\n        : ''\n    );\n    const toISO = (s) => {\n      if (!s) return null;\n      const d = new Date(s.replace(' ', 'T'));\n      return isNaN(d) ? null : d.toISOString();\n    };\n    const body = {};\n    const ciISO = toISO(ci);\n    const coISO = toISO(co);\n    if (ciISO) body.clockIn = ciISO;\n    if (coISO) body.clockOut = coISO;\n    try {\n      await api(`/api/attendance/${r._id}`, {\n        method: 'PUT',\n        body: JSON.stringify(body),\n      });\n      await loadReportBy(range.from, range.to);\n      await refreshToday();\n      showToast('success', 'עודכן בהצלחה');\n    } catch (e) {\n      showToast('error', e.message);\n    }\n  }\n\n  const inShift = !!today?.clockIn && !today?.clockOut;\n  const hasOpenBreak = !!(today?.breaks || []).find((b) => b.start && !b.end);\n\n  return (\n    <div className=\"min-h-screen p-4\">\n      <Toast\n        show={toast.show}\n        type={toast.type}\n        title={toast.title}\n        message={toast.message}\n        onClose={closeToast}\n      />\n\n      <header className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-3\">\n          <img src=\"/logo.png\" alt=\"Costoro\" className=\"w-10 h-10 rounded-md\" />\n          <div>\n            <div className=\"font-semibold text-lg\">שלום {me?.name || ''}</div>\n            <div className=\"text-sm text-slate-500\">{me?.email}</div>\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          {me?.permissions?.manageUsers && (\n            <a\n              href=\"/admin/users\"\n              className=\"px-3 py-2 rounded-xl bg-white border shadow text-sm\"\n            >\n              ניהול משתמשים\n            </a>\n          )}\n          <div\n            className={`px-3 py-1 rounded-xl text-white text-sm ${\n              hasOpenBreak\n                ? 'bg-amber-500'\n                : inShift\n                ? 'bg-emerald-600'\n                : 'bg-slate-400'\n            }`}\n          >\n            {hasOpenBreak ? 'בהפסקה' : inShift ? 'במשמרת' : 'לא במשמרת'}\n          </div>\n          <div className=\"px-3 py-1 rounded-xl bg-white shadow text-sm\">\n            {timeText}\n          </div>\n          <button\n            onClick={logout}\n            className=\"px-4 py-2 rounded-xl border bg-white hover:bg-slate-50\"\n          >\n            התנתק\n          </button>\n        </div>\n      </header>\n\n      {err && <div className=\"mb-4 text-rose-600\">{err}</div>}\n\n      <main className=\"grid md:grid-cols-2 gap-6\">\n        {/* דוחות */}\n        <div className=\"bg-white rounded-2xl shadow p-5\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <h2 className=\"text-xl font-semibold\">דוח לפי תאריכים</h2>\n            {me?.permissions?.exportReports && (\n              <div className=\"flex gap-3 text-sm\">\n                <button onClick={exportCSV} className=\"underline\">\n                  CSV\n                </button>\n                <button onClick={exportXLSX} className=\"underline\">\n                  Excel\n                </button>\n                <button onClick={exportPDF} className=\"underline\">\n                  PDF\n                </button>\n              </div>\n            )}\n          </div>\n          <form onSubmit={loadReport} className=\"flex items-end gap-3 mb-4\">\n            <div>\n              <label className=\"block text-sm mb-1\">מתאריך</label>\n              <input\n                type=\"date\"\n                className=\"border rounded-xl px-3 py-2\"\n                value={range.from}\n                onChange={(e) =>\n                  setRange((v) => ({ ...v, from: e.target.value }))\n                }\n                required\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm mb-1\">עד תאריך</label>\n              <input\n                type=\"date\"\n                className=\"border rounded-xl px-3 py-2\"\n                value={range.to}\n                onChange={(e) =>\n                  setRange((v) => ({ ...v, to: e.target.value }))\n                }\n                required\n              />\n            </div>\n            <button className=\"btn\" type=\"submit\" disabled={busy}>\n              טען\n            </button>\n          </form>\n\n          <div className=\"overflow-auto\">\n            <table className=\"min-w-full text-sm\">\n              <thead>\n                <tr className=\"text-left border-b\">\n                  <th className=\"py-2\">תאריך</th>\n                  <th className=\"py-2\">Clock In</th>\n                  <th className=\"py-2\">Clock Out</th>\n                  <th className=\"py-2\">רגיל</th>\n                  <th className=\"py-2\">נוספות</th>\n                  <th className=\"py-2\">סה״כ</th>\n                  {me?.permissions?.attendanceEdit && <th className=\"py-2\"></th>}\n                </tr>\n              </thead>\n              <tbody>\n                {rows.map((r) => (\n                  <tr key={r._id} className=\"border-b\">\n                    <td className=\"py-2\">{r.date}</td>\n                    <td className=\"py-2\">\n                      {r.clockIn\n                        ? new Date(r.clockIn).toLocaleTimeString()\n                        : '-'}\n                    </td>\n                    <td className=\"py-2\">\n                      {r.clockOut\n                        ? new Date(r.clockOut).toLocaleTimeString()\n                        : '-'}\n                    </td>\n                    <td className=\"py-2\">\n                      {r.regularMinutes ? fmtMin(r.regularMinutes) : '-'}\n                    </td>\n                    <td className=\"py-2\">\n                      {r.overtimeMinutes ? fmtMin(r.overtimeMinutes) : '-'}\n                    </td>\n                    <td className=\"py-2\">\n                      {r.totalMinutes ? fmtMin(r.totalMinutes) : '-'}\n                    </td>\n                    {me?.permissions?.attendanceEdit && (\n                      <td className=\"py-2\">\n                        <button\n                          className=\"px-3 py-1 rounded-xl border\"\n                          onClick={() => editRow(r)}\n                        >\n                          ערוך\n                        </button>\n                      </td>\n                    )}\n                  </tr>\n                ))}\n                {!rows.length && (\n                  <tr>\n                    <td className=\"py-4 text-slate-400\" colSpan={7}>\n                      אין נתונים לתקופה זו\n                    </td>\n                  </tr>\n                )}\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n        {/* היום */}\n        <div className=\"bg-white rounded-2xl shadow p-5\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <h2 className=\"text-xl font-semibold\">היום</h2>\n            <div className=\"text-xs text-slate-500\">\n              {inShift ? 'במשמרת פעילה' : 'לא במשמרת'}\n            </div>\n          </div>\n\n          <div className=\"flex gap-2 flex-wrap mb-4\">\n            <button\n              className=\"btn\"\n              disabled={busy || inShift}\n              onClick={() => doPost('/api/attendance/clockin', 'Clock In בוצע!')}\n            >\n              Clock In\n            </button>\n            <button\n              className=\"btn\"\n              disabled={busy || !inShift}\n              onClick={() =>\n                doPost('/api/attendance/clockout', 'Clock Out בוצע!')\n              }\n            >\n              Clock Out\n            </button>\n            <button\n              className=\"btn\"\n              disabled={busy || !inShift || hasOpenBreak}\n              onClick={() =>\n                doPost('/api/attendance/break/start', 'הפסקה התחילה')\n              }\n            >\n              Start Break\n            </button>\n            <button\n              className=\"btn\"\n              disabled={busy || !inShift || !hasOpenBreak}\n              onClick={() =>\n                doPost('/api/attendance/break/end', 'הפסקה הסתיימה')\n              }\n            >\n              End Break\n            </button>\n          </div>\n\n          <div className=\"space-y-2\">\n            <div>\n              <b>Clock In:</b>{' '}\n              {today?.clockIn\n                ? new Date(today.clockIn).toLocaleTimeString()\n                : '-'}\n            </div>\n            <div>\n              <b>Clock Out:</b>{' '}\n              {today?.clockOut\n                ? new Date(today.clockOut).toLocaleTimeString()\n                : '-'}\n            </div>\n            <div>\n              <b>סה״כ:</b>{' '}\n              {today?.totalMinutes ? fmtMin(today.totalMinutes) : '-'}\n            </div>\n            <div>\n              <b>רגיל:</b>{' '}\n              {today?.regularMinutes ? fmtMin(today.regularMinutes) : '-'}\n            </div>\n            <div>\n              <b>נוספות:</b>{' '}\n              {today?.overtimeMinutes ? fmtMin(today.overtimeMinutes) : '-'}\n            </div>\n            <div>\n              <b>הפסקות:</b>\n              <ul className=\"list-disc pr-5\">\n                {(today?.breaks || []).map((b, i) => (\n                  <li key={i}>\n                    {b.start\n                      ? new Date(b.start).toLocaleTimeString()\n                      : '-'}{' '}\n                    →{' '}\n                    {b.end ? new Date(b.end).toLocaleTimeString() : '—'}\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      <style>{`.btn{background:black;color:white;border-radius:0.75rem;padding:0.6rem 1rem}\n      .btn[disabled]{opacity:.4;cursor:not-allowed}`}</style>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}