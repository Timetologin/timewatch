{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\timewatch-clone\\\\client\\\\src\\\\pages\\\\Login.js\",\n  _s = $RefreshSig$();\n// client/src/pages/Login.js\nimport React, { useState } from 'react';\nimport { api } from '../api';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const [form, setForm] = useState({\n    email: '',\n    password: ''\n  });\n  const [busy, setBusy] = useState(false);\n  const [error, setError] = useState('');\n  const [showPass, setShowPass] = useState(false);\n  const onChange = e => setForm(f => ({\n    ...f,\n    [e.target.name]: e.target.value\n  }));\n  const onSubmit = async e => {\n    e.preventDefault();\n    if (busy) return;\n    setBusy(true);\n    setError('');\n    try {\n      const data = await api('/api/auth/login', {\n        method: 'POST',\n        body: JSON.stringify({\n          email: form.email.trim().toLowerCase(),\n          password: form.password\n        })\n      });\n\n      // שמירה בפורמט החדש\n      const auth = {\n        token: data.token,\n        user: data.user\n      };\n      localStorage.setItem('auth', JSON.stringify(auth));\n      // ניקוי מפתחות ישנים\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      window.location.replace('/');\n    } catch (err) {\n      setError(err.message || 'שגיאה בהתחברות');\n    } finally {\n      setBusy(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen flex items-center justify-center bg-slate-50 p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-md bg-white rounded-2xl shadow px-6 py-7\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center gap-3 mb-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/logo.png\",\n          alt: \"Costoro\",\n          className: \"w-10 h-10 rounded-md\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl font-bold\",\n          children: \"\\u05D4\\u05EA\\u05D7\\u05D1\\u05E8\\u05D5\\u05EA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 text-rose-600 text-sm text-right\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: onSubmit,\n        className: \"grid gap-3 text-right\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm mb-1\",\n            children: \"\\u05D0\\u05D9\\u05DE\\u05D9\\u05D9\\u05DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"w-full border rounded-xl px-3 py-2 bg-slate-50 focus:bg-white outline-none\",\n            type: \"email\",\n            name: \"email\",\n            dir: \"ltr\",\n            placeholder: \"name@example.com\",\n            value: form.email,\n            onChange: onChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm mb-1\",\n            children: \"\\u05E1\\u05D9\\u05E1\\u05DE\\u05D4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"w-full border rounded-xl px-3 py-2 bg-slate-50 focus:bg-white outline-none\",\n              type: showPass ? 'text' : 'password',\n              name: \"password\",\n              placeholder: \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",\n              value: form.password,\n              onChange: onChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setShowPass(v => !v),\n              className: \"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-slate-500 hover:text-slate-700\",\n              children: showPass ? 'הסתר' : 'הצג'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"mt-2 bg-black text-white rounded-xl py-2 hover:opacity-90 disabled:opacity-40\",\n          disabled: busy,\n          children: busy ? 'מתחבר…' : 'התחברות'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 text-sm text-right\",\n        children: [\"\\u05D0\\u05D9\\u05DF \\u05DC\\u05DA \\u05D7\\u05E9\\u05D1\\u05D5\\u05DF?\", ' ', /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          className: \"text-blue-600 underline\",\n          children: \"\\u05D4\\u05E8\\u05E9\\u05DE\\u05D4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 text-[11px] text-slate-400 text-right\",\n        children: \"\\u05D1\\u05E2\\u05D9\\u05D4 \\u05D1\\u05D4\\u05EA\\u05D7\\u05D1\\u05E8\\u05D5\\u05EA? \\u05D5\\u05D3\\u05D0 \\u05E9\\u05D4\\u05D3\\u05E4\\u05D3\\u05E4\\u05DF \\u05DC\\u05D0 \\u05D7\\u05D5\\u05E1\\u05DD cookies / localStorage.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"529E4FK1gJtSScUG7hKV+uCK5rw=\");\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","api","Link","jsxDEV","_jsxDEV","Login","_s","form","setForm","email","password","busy","setBusy","error","setError","showPass","setShowPass","onChange","e","f","target","name","value","onSubmit","preventDefault","data","method","body","JSON","stringify","trim","toLowerCase","auth","token","user","localStorage","setItem","removeItem","window","location","replace","err","message","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","type","dir","placeholder","required","onClick","v","disabled","to","_c","$RefreshReg$"],"sources":["C:/Users/user/Desktop/timewatch-clone/client/src/pages/Login.js"],"sourcesContent":["// client/src/pages/Login.js\nimport React, { useState } from 'react';\nimport { api } from '../api';\nimport { Link } from 'react-router-dom';\n\nexport default function Login() {\n  const [form, setForm] = useState({ email: '', password: '' });\n  const [busy, setBusy] = useState(false);\n  const [error, setError] = useState('');\n  const [showPass, setShowPass] = useState(false);\n\n  const onChange = (e) => setForm((f) => ({ ...f, [e.target.name]: e.target.value }));\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    if (busy) return;\n    setBusy(true);\n    setError('');\n    try {\n      const data = await api('/api/auth/login', {\n        method: 'POST',\n        body: JSON.stringify({\n          email: form.email.trim().toLowerCase(),\n          password: form.password\n        })\n      });\n\n      // שמירה בפורמט החדש\n      const auth = { token: data.token, user: data.user };\n      localStorage.setItem('auth', JSON.stringify(auth));\n      // ניקוי מפתחות ישנים\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n\n      window.location.replace('/');\n    } catch (err) {\n      setError(err.message || 'שגיאה בהתחברות');\n    } finally {\n      setBusy(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-slate-50 p-4\">\n      <div className=\"w-full max-w-md bg-white rounded-2xl shadow px-6 py-7\">\n        <div className=\"flex items-center justify-center gap-3 mb-5\">\n          <img src=\"/logo.png\" alt=\"Costoro\" className=\"w-10 h-10 rounded-md\" />\n          <h1 className=\"text-xl font-bold\">התחברות</h1>\n        </div>\n\n        {error ? (\n          <div className=\"mb-4 text-rose-600 text-sm text-right\">{error}</div>\n        ) : null}\n\n        <form onSubmit={onSubmit} className=\"grid gap-3 text-right\">\n          <div>\n            <label className=\"block text-sm mb-1\">אימייל</label>\n            <input\n              className=\"w-full border rounded-xl px-3 py-2 bg-slate-50 focus:bg-white outline-none\"\n              type=\"email\"\n              name=\"email\"\n              dir=\"ltr\"\n              placeholder=\"name@example.com\"\n              value={form.email}\n              onChange={onChange}\n              required\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm mb-1\">סיסמה</label>\n            <div className=\"relative\">\n              <input\n                className=\"w-full border rounded-xl px-3 py-2 bg-slate-50 focus:bg-white outline-none\"\n                type={showPass ? 'text' : 'password'}\n                name=\"password\"\n                placeholder=\"••••••••\"\n                value={form.password}\n                onChange={onChange}\n                required\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowPass((v) => !v)}\n                className=\"absolute left-2 top-1/2 -translate-y-1/2 text-xs text-slate-500 hover:text-slate-700\"\n              >\n                {showPass ? 'הסתר' : 'הצג'}\n              </button>\n            </div>\n          </div>\n\n          <button\n            className=\"mt-2 bg-black text-white rounded-xl py-2 hover:opacity-90 disabled:opacity-40\"\n            disabled={busy}\n          >\n            {busy ? 'מתחבר…' : 'התחברות'}\n          </button>\n        </form>\n\n        <div className=\"mt-4 text-sm text-right\">\n          אין לך חשבון?\n          {' '}\n          <Link to=\"/register\" className=\"text-blue-600 underline\">הרשמה</Link>\n        </div>\n\n        <div className=\"mt-2 text-[11px] text-slate-400 text-right\">\n          בעיה בהתחברות? ודא שהדפדפן לא חוסם cookies / localStorage.\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}