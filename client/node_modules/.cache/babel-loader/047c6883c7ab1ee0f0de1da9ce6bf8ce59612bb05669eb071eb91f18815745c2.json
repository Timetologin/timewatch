{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\timewatch-clone\\\\client\\\\src\\\\pages\\\\Dashboard.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// client/src/pages/Dashboard.js\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { api } from '../api';\nimport Toast from '../components/Toast';\nimport Modal from '../components/Modal';\nimport jsPDF from 'jspdf';\nimport 'jspdf-autotable';\nimport * as XLSX from 'xlsx';\n\n/* ========== Utilities ========== */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction fmtMin(n) {\n  if (n == null || isNaN(n)) return '0ד';\n  const h = Math.floor(n / 60);\n  const m = Math.round(n % 60);\n  return `${h}ש ${m}ד`;\n}\nfunction todayISO() {\n  const d = new Date();\n  const off = d.getTimezoneOffset();\n  const z = new Date(d.getTime() - off * 60000);\n  return z.toISOString().slice(0, 10);\n}\nasync function getGeo() {\n  if (!('geolocation' in navigator)) return null;\n  return new Promise(resolve => {\n    navigator.geolocation.getCurrentPosition(pos => resolve({\n      lat: pos.coords.latitude,\n      lng: pos.coords.longitude\n    }), () => resolve(null), {\n      enableHighAccuracy: false,\n      timeout: 3000,\n      maximumAge: 60000\n    });\n  });\n}\nfunction fileDateStamp(d = new Date()) {\n  const pad = n => String(n).padStart(2, '0');\n  return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}`;\n}\n\n/* ========== Component ========== */\nexport default function Dashboard() {\n  _s();\n  var _today$breaks;\n  const [me, setMe] = useState(null);\n\n  // Today panel\n  const [today, setToday] = useState(null);\n  const [loadingToday, setLoadingToday] = useState(true);\n\n  // Report\n  const [from, setFrom] = useState(todayISO());\n  const [to, setTo] = useState(todayISO());\n  const [userId, setUserId] = useState('');\n  const [rows, setRows] = useState([]);\n  const [loadingReport, setLoadingReport] = useState(false);\n\n  // UI\n  const [msg, setMsg] = useState(null);\n  const [confirm, setConfirm] = useState(null);\n\n  // Dark mode (עצמאי, בלי Tailwind)\n  const [dark, setDark] = useState(() => {\n    try {\n      return localStorage.getItem('tw_dark') === '1';\n    } catch {\n      return false;\n    }\n  });\n  useEffect(() => {\n    const root = document.documentElement;\n    if (dark) root.classList.add('dark');else root.classList.remove('dark');\n    try {\n      localStorage.setItem('tw_dark', dark ? '1' : '0');\n    } catch {}\n  }, [dark]);\n\n  /* ===== Data ===== */\n  useEffect(() => {\n    let stop = false;\n    (async () => {\n      try {\n        const data = await api('/api/auth/me');\n        if (!stop) setMe(data);\n      } catch {}\n    })();\n    return () => {\n      stop = true;\n    };\n  }, []);\n  async function refreshToday() {\n    setLoadingToday(true);\n    try {\n      const t = todayISO();\n      const res = await api(`/api/attendance/report?from=${t}&to=${t}`);\n      const mine = Array.isArray(res) && res.length ? res[0] : null;\n      setToday(mine || null);\n    } catch (e) {\n      setMsg({\n        type: 'error',\n        title: 'שגיאה',\n        message: e.message\n      });\n    } finally {\n      setLoadingToday(false);\n    }\n  }\n  async function refreshReport() {\n    setLoadingReport(true);\n    try {\n      const qs = new URLSearchParams({\n        from,\n        to\n      });\n      if (userId) qs.set('userId', userId);\n      const data = await api(`/api/attendance/report?${qs.toString()}`);\n      setRows(Array.isArray(data) ? data : []);\n    } catch (e) {\n      setMsg({\n        type: 'error',\n        title: 'שגיאה',\n        message: e.message\n      });\n    } finally {\n      setLoadingReport(false);\n    }\n  }\n  useEffect(() => {\n    refreshToday();\n  }, []);\n  useEffect(() => {\n    refreshReport();\n  }, [from, to, userId]);\n  const hasOpenShift = !!(today && today.clockIn && !today.clockOut);\n  const onBreak = useMemo(() => {\n    if (!today || !today.breaks) return false;\n    const last = today.breaks[today.breaks.length - 1];\n    return !!(last && last.start && !last.end);\n  }, [today]);\n\n  // טיימר חי (סה\"כ נטו)\n  const liveMinutes = useLiveMinutes(today);\n\n  /* ===== Actions ===== */\n  async function doClockIn() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? {\n        coords\n      } : undefined;\n      await api('/api/attendance/clockin', {\n        method: 'POST',\n        body: JSON.stringify(body)\n      });\n      setMsg({\n        type: 'success',\n        title: 'Clock In בוצע'\n      });\n      await refreshToday();\n      await refreshReport();\n    } catch (e) {\n      setMsg({\n        type: 'error',\n        title: 'שגיאה',\n        message: e.message\n      });\n    }\n  }\n  async function doClockOut() {\n    if (onBreak) {\n      setConfirm({\n        title: 'סגירת משמרת בזמן הפסקה',\n        body: 'יש הפסקה פתוחה. לסגור אותה ולבצע Clock Out?',\n        onConfirm: async () => {\n          try {\n            await api('/api/attendance/break/end', {\n              method: 'POST'\n            });\n          } catch {}\n          await reallyClockOut();\n        }\n      });\n      return;\n    }\n    await reallyClockOut();\n  }\n  async function reallyClockOut() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? {\n        coords\n      } : undefined;\n      await api('/api/attendance/clockout', {\n        method: 'POST',\n        body: JSON.stringify(body)\n      });\n      setMsg({\n        type: 'success',\n        title: 'Clock Out בוצע'\n      });\n      await refreshToday();\n      await refreshReport();\n    } catch (e) {\n      setMsg({\n        type: 'error',\n        title: 'שגיאה',\n        message: e.message\n      });\n    }\n  }\n  async function startBreak() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? {\n        coords\n      } : undefined;\n      await api('/api/attendance/break/start', {\n        method: 'POST',\n        body: JSON.stringify(body)\n      });\n      setMsg({\n        type: 'success',\n        title: 'הפסקה התחילה'\n      });\n      await refreshToday();\n      await refreshReport();\n    } catch (e) {\n      setMsg({\n        type: 'error',\n        title: 'שגיאה',\n        message: e.message\n      });\n    }\n  }\n  async function endBreak() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? {\n        coords\n      } : undefined;\n      await api('/api/attendance/break/end', {\n        method: 'POST',\n        body: JSON.stringify(body)\n      });\n      setMsg({\n        type: 'success',\n        title: 'הפסקה הסתיימה'\n      });\n      await refreshToday();\n      await refreshReport();\n    } catch (e) {\n      setMsg({\n        type: 'error',\n        title: 'שגיאה',\n        message: e.message\n      });\n    }\n  }\n  const totals = useMemo(() => {\n    const sum = k => rows.reduce((a, r) => a + (Number(r[k]) || 0), 0);\n    return {\n      regularMinutes: sum('regularMinutes'),\n      overtimeMinutes: sum('overtimeMinutes'),\n      totalMinutes: sum('totalMinutes')\n    };\n  }, [rows]);\n\n  /* ===== Exports ===== */\n  function exportCSV() {\n    const header = ['date', 'clockIn', 'clockOut', 'regularMinutes', 'overtimeMinutes', 'totalMinutes'];\n    const lines = [header.join(',')].concat(rows.map(r => {\n      var _r$regularMinutes, _r$overtimeMinutes, _r$totalMinutes;\n      return [r.date, r.clockIn ? new Date(r.clockIn).toLocaleString() : '', r.clockOut ? new Date(r.clockOut).toLocaleString() : '', (_r$regularMinutes = r.regularMinutes) !== null && _r$regularMinutes !== void 0 ? _r$regularMinutes : 0, (_r$overtimeMinutes = r.overtimeMinutes) !== null && _r$overtimeMinutes !== void 0 ? _r$overtimeMinutes : 0, (_r$totalMinutes = r.totalMinutes) !== null && _r$totalMinutes !== void 0 ? _r$totalMinutes : 0].join(',');\n    }));\n    const blob = new Blob([lines.join('\\n')], {\n      type: 'text/csv;charset=utf-8'\n    });\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    const who = userId ? `user-${userId}` : (me === null || me === void 0 ? void 0 : me.name) || 'me';\n    a.download = `Costoro-${who}-${from}_to_${to}.csv`;\n    a.click();\n  }\n  function exportExcel() {\n    const rows2 = rows.map(r => ({\n      Date: r.date,\n      ClockIn: r.clockIn ? new Date(r.clockIn).toLocaleString() : '',\n      ClockOut: r.clockOut ? new Date(r.clockOut).toLocaleString() : '',\n      RegularMinutes: r.regularMinutes || 0,\n      OvertimeMinutes: r.overtimeMinutes || 0,\n      TotalMinutes: r.totalMinutes || 0\n    }));\n    const wb = XLSX.utils.book_new();\n    const ws = XLSX.utils.json_to_sheet(rows2);\n    XLSX.utils.book_append_sheet(wb, ws, 'Report');\n    const who = userId ? `user-${userId}` : (me === null || me === void 0 ? void 0 : me.name) || 'me';\n    XLSX.writeFile(wb, `Costoro-${who}-${from}_to_${to}.xlsx`);\n  }\n  async function exportPDF() {\n    const doc = new jsPDF('p', 'pt');\n    const marginX = 36;\n    const lineY = 64;\n    doc.setFontSize(16);\n    doc.text('Costoro - Attendance Report', marginX, 30);\n    doc.setFontSize(11);\n    const who = userId ? `User: ${userId}` : me !== null && me !== void 0 && me.name ? `User: ${me.name}` : 'User: Me';\n    doc.text(`${who}    Range: ${from} → ${to}`, marginX, 46);\n    doc.setLineWidth(0.5);\n    doc.line(marginX, lineY, 559, lineY);\n    try {\n      const img = await loadImage('/logo.png');\n      const cnv = document.createElement('canvas');\n      cnv.width = img.width;\n      cnv.height = img.height;\n      const ctx = cnv.getContext('2d');\n      ctx.drawImage(img, 0, 0);\n      const base64 = cnv.toDataURL('image/png');\n      doc.addImage(base64, 'PNG', 500, 16, 56, 56);\n    } catch {}\n    const body = rows.map(r => [r.date, r.clockIn ? new Date(r.clockIn).toLocaleString() : '-', r.clockOut ? new Date(r.clockOut).toLocaleString() : '-', fmtMin(r.regularMinutes || 0), fmtMin(r.overtimeMinutes || 0), fmtMin(r.totalMinutes || 0)]);\n    doc.autoTable({\n      startY: lineY + 16,\n      head: [['תאריך', 'Clock In', 'Clock Out', 'רגיל', 'נוספות', 'סה״כ']],\n      body,\n      styles: {\n        font: 'helvetica',\n        fontSize: 10\n      },\n      headStyles: {\n        fillColor: [20, 20, 20],\n        textColor: [255, 255, 255]\n      },\n      margin: {\n        left: marginX,\n        right: marginX\n      }\n    });\n    const finalY = doc.lastAutoTable.finalY || lineY + 16;\n    doc.setFontSize(11);\n    doc.text(`Totals: רגיל ${fmtMin(totals.regularMinutes)}, נוספות ${fmtMin(totals.overtimeMinutes)}, סה״כ ${fmtMin(totals.totalMinutes)}`, marginX, finalY + 24);\n    doc.save(`Costoro-${(me === null || me === void 0 ? void 0 : me.name) || 'me'}-${fileDateStamp()}.pdf`);\n  }\n\n  /* ===== Presets ===== */\n  function setPreset(kind) {\n    const d = new Date();\n    const toLocalISO = x => {\n      const off = x.getTimezoneOffset();\n      const z = new Date(x.getTime() - off * 60000);\n      return z.toISOString().slice(0, 10);\n    };\n    if (kind === 'today') {\n      const t = toLocalISO(new Date());\n      setFrom(t);\n      setTo(t);\n    } else if (kind === 'yesterday') {\n      const y = new Date(d);\n      y.setDate(d.getDate() - 1);\n      const t = toLocalISO(y);\n      setFrom(t);\n      setTo(t);\n    } else if (kind === 'week') {\n      const day = d.getDay(); // 0..6\n      const monday = new Date(d);\n      const sunday = new Date(d);\n      monday.setDate(d.getDate() - (day + 6) % 7);\n      sunday.setDate(monday.getDate() + 6);\n      setFrom(toLocalISO(monday));\n      setTo(toLocalISO(sunday));\n    } else if (kind === 'month') {\n      const first = new Date(d.getFullYear(), d.getMonth(), 1);\n      const last = new Date(d.getFullYear(), d.getMonth() + 1, 0);\n      setFrom(toLocalISO(first));\n      setTo(toLocalISO(last));\n    }\n  }\n  function logout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    localStorage.removeItem('auth');\n    window.location.href = '/login';\n  }\n\n  /* ===== Render ===== */\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page\",\n    children: [/*#__PURE__*/_jsxDEV(Toast, {\n      ...(msg || {}),\n      onClose: () => setMsg(null),\n      show: !!msg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }, this), confirm && /*#__PURE__*/_jsxDEV(Modal, {\n      title: confirm.title,\n      onClose: () => setConfirm(null),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: confirm.body\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row end gap\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            onClick: () => {\n              var _confirm$onConfirm;\n              setConfirm(null);\n              (_confirm$onConfirm = confirm.onConfirm) === null || _confirm$onConfirm === void 0 ? void 0 : _confirm$onConfirm.call(confirm);\n            },\n            children: \"\\u05D0\\u05D9\\u05E9\\u05D5\\u05E8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn gray\",\n            onClick: () => setConfirm(null),\n            children: \"\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"topbar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row gap\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"chip\",\n          onClick: () => setDark(v => !v),\n          children: dark ? 'מצב בהיר' : 'מצב כהה'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"chip\",\n          onClick: () => window.open('/kiosk', '_blank'),\n          children: \"\\u05E2\\u05DE\\u05D3\\u05EA \\u05E1\\u05E8\\u05D9\\u05E7\\u05D4 (QR)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this), (me === null || me === void 0 ? void 0 : me.role) === 'admin' && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"chip\",\n          onClick: () => window.location.href = '/admin/users',\n          children: \"\\u05E0\\u05D9\\u05D4\\u05D5\\u05DC \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9\\u05D9\\u05DD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row gap\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"clock\",\n          children: new Date().toLocaleTimeString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"userbox\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/logo.png\",\n            alt: \"Logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"name\",\n              children: [\"\\u05E9\\u05DC\\u05D5\\u05DD \", (me === null || me === void 0 ? void 0 : me.name) || '...']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"email\",\n              children: (me === null || me === void 0 ? void 0 : me.email) || ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-head\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u05D3\\u05D5\\u05D7 \\u05DC\\u05E4\\u05D9 \\u05EA\\u05D0\\u05E8\\u05D9\\u05DB\\u05D9\\u05DD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row gap\",\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"link\",\n              onClick: exportCSV,\n              children: \"CSV\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"link\",\n              onClick: exportExcel,\n              children: \"Excel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"link\",\n              onClick: exportPDF,\n              children: \"PDF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filters\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row gap wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"input\",\n              value: userId,\n              onChange: e => setUserId(e.target.value),\n              children: /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"\\u2014 \\u05DB\\u05D5\\u05DC/\\u05D4 \\u05D0\\u05EA \\u05E2\\u05E6\\u05DE\\u05D9 \\u2014\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              type: \"date\",\n              value: from,\n              onChange: e => setFrom(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u05E2\\u05D3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              type: \"date\",\n              value: to,\n              onChange: e => setTo(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row gap\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"chip\",\n                onClick: () => setPreset('today'),\n                children: \"\\u05D4\\u05D9\\u05D5\\u05DD\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"chip\",\n                onClick: () => setPreset('yesterday'),\n                children: \"\\u05D0\\u05EA\\u05DE\\u05D5\\u05DC\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"chip\",\n                onClick: () => setPreset('week'),\n                children: \"\\u05D4\\u05E9\\u05D1\\u05D5\\u05E2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"chip\",\n                onClick: () => setPreset('month'),\n                children: \"\\u05D4\\u05D7\\u05D5\\u05D3\\u05E9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-wrap\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Clock In\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 357,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Clock Out\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 358,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u05E8\\u05D2\\u05D9\\u05DC\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u05E0\\u05D5\\u05E1\\u05E4\\u05D5\\u05EA\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 360,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u05E1\\u05F4\\u05DB\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 362,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: loadingReport ? Array.from({\n                length: 6\n              }).map((_, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: /*#__PURE__*/_jsxDEV(\"td\", {\n                  colSpan: \"7\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"skeleton\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 368,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 368,\n                  columnNumber: 33\n                }, this)\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 21\n              }, this)) : rows.map(r => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: r.date\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: r.clockIn ? new Date(r.clockIn).toLocaleTimeString() : '-'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: r.clockOut ? new Date(r.clockOut).toLocaleTimeString() : '-'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 375,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: fmtMin(r.regularMinutes || 0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: fmtMin(r.overtimeMinutes || 0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: fmtMin(r.totalMinutes || 0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn tiny\",\n                    disabled: true,\n                    children: \"\\u05E2\\u05E8\\u05D5\\u05DA\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 379,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 379,\n                  columnNumber: 23\n                }, this)]\n              }, r._id || r.date, true, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 15\n            }, this), !loadingReport && /*#__PURE__*/_jsxDEV(\"tfoot\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"\\u05E1\\u05D9\\u05DB\\u05D5\\u05DD\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 30\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: fmtMin(totals.regularMinutes)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 389,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: fmtMin(totals.overtimeMinutes)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: fmtMin(totals.totalMinutes)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 391,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 392,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-head\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u05D4\\u05D9\\u05D5\\u05DD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"muted\",\n            children: today ? today.date : todayISO()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row gap wrap end mb\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            disabled: hasOpenShift,\n            onClick: doClockIn,\n            children: \"Clock In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn gray\",\n            disabled: !hasOpenShift || onBreak,\n            onClick: startBreak,\n            children: \"Start Break\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn gray\",\n            disabled: !onBreak,\n            onClick: endBreak,\n            children: \"End Break\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn gray\",\n            disabled: !hasOpenShift,\n            onClick: doClockOut,\n            children: \"Clock Out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this), loadingToday ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"skeleton big\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 13\n        }, this) : !today ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"muted\",\n          children: \"\\u05DC\\u05D0 \\u05D1\\u05DE\\u05E9\\u05DE\\u05E8\\u05EA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"two\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stack\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Clock In:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 22\n              }, this), \" \", today.clockIn ? new Date(today.clockIn).toLocaleTimeString() : '-']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 421,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Clock Out:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 22\n              }, this), \" \", today.clockOut ? new Date(today.clockOut).toLocaleTimeString() : '-']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"\\u05E1\\u05D4\\u05F4\\u05DB (\\u05D7\\u05D9):\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 22\n              }, this), \" \", fmtMin(liveMinutes)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"\\u05E8\\u05D2\\u05D9\\u05DC:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 22\n              }, this), \" \", fmtMin(today.regularMinutes || 0)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"\\u05E0\\u05D5\\u05E1\\u05E4\\u05D5\\u05EA:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 22\n              }, this), \" \", fmtMin(today.overtimeMinutes || 0)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stack\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"b\",\n              children: \"\\u05D4\\u05E4\\u05E1\\u05E7\\u05D5\\u05EA:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"bullets\",\n              children: [(today.breaks || []).map((b, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [b.start ? new Date(b.start).toLocaleTimeString() : '-', \" \\u2192 \", b.end ? new Date(b.end).toLocaleTimeString() : '—']\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 21\n              }, this)), !((_today$breaks = today.breaks) !== null && _today$breaks !== void 0 && _today$breaks.length) && /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"\\u2014\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"footer\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn gray\",\n        onClick: logout,\n        children: \"\\u05D4\\u05EA\\u05E0\\u05EA\\u05E7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"muted\",\n        children: [\"Costoro \", new Date().getFullYear(), \" \\xA9\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        :root { --bg:#f4f7fb; --fg:#0f172a; --muted:#6b7280; --card:#ffffff; --border:#e5e7eb; --chip:#eef2f7; --chip-fg:#0f172a; --accent:#111; }\n        .dark:root { --bg:#0f172a; --fg:#e5e7eb; --muted:#93a1b5; --card:#111827; --border:#273043; --chip:#1f2937; --chip-fg:#e5e7eb; --accent:#f8fafc; }\n        html, body, #root { height:100%; }\n        body { background:var(--bg); color:var(--fg); }\n        .page { min-height:100vh; display:flex; flex-direction:column; gap:16px; }\n        .topbar { display:flex; justify-content:space-between; align-items:center; padding:14px 16px; }\n        .row { display:flex; align-items:center; }\n        .row.end { justify-content:flex-end; }\n        .row.wrap { flex-wrap:wrap; }\n        .gap { gap:10px; }\n        .mb { margin-bottom:10px; }\n        .clock { background:#000; color:#fff; border-radius:999px; padding:4px 10px; font-size:12px; }\n        .userbox { display:flex; gap:10px; align-items:center; }\n        .userbox img { width:32px; height:32px; border-radius:6px; }\n        .userbox .name { font-weight:700; font-size:14px; }\n        .userbox .email { font-size:12px; color:var(--muted); }\n        .chip { background:var(--chip); color:var(--chip-fg); border:1px solid var(--border); border-radius:10px; padding:6px 10px; font-size:13px; }\n        .grid { display:grid; grid-template-columns:1fr 1fr; gap:16px; padding:0 16px 20px; }\n        @media (max-width: 1024px){ .grid{ grid-template-columns:1fr; } }\n        .card { background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:0 1px 2px rgba(0,0,0,.03); padding:14px; }\n        .card-head { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }\n        .card-head h2 { margin:0; font-size:18px; }\n        .muted { color:var(--muted); font-size:13px; }\n        .filters { padding:8px 0; border-top:1px solid var(--border); border-bottom:1px solid var(--border); margin-bottom:10px; }\n        .input { border:1px solid var(--border); background:transparent; color:var(--fg); border-radius:10px; padding:6px 10px; font-size:14px; }\n        .btn { background:#111; color:#fff; border:none; border-radius:10px; padding:8px 14px; font-weight:600; }\n        .btn.gray { background:var(--chip); color:var(--chip-fg); border:1px solid var(--border); }\n        .btn.tiny { padding:4px 8px; font-size:12px; }\n        .btn[disabled]{ opacity:.45; cursor:not-allowed; }\n        .link { text-decoration:underline; cursor:pointer; }\n        .table-wrap { max-height:480px; overflow:auto; border:1px solid var(--border); border-radius:10px; }\n        .table { width:100%; border-collapse:separate; border-spacing:0; direction:rtl; }\n        .table thead th { position:sticky; top:0; background:var(--chip); color:var(--chip-fg); text-align:right; padding:10px; border-bottom:1px solid var(--border); font-weight:700; }\n        .table tbody td { padding:10px; border-bottom:1px solid var(--border); }\n        .table tbody tr:nth-child(even){ background:rgba(0,0,0,.02); }\n        .table tfoot td { padding:10px; background:var(--chip); color:var(--chip-fg); font-weight:700; position:sticky; bottom:0; }\n        .skeleton { height:36px; background:linear-gradient(90deg, rgba(0,0,0,.06), rgba(0,0,0,.02), rgba(0,0,0,.06)); animation:s 1.4s infinite; border-radius:8px; }\n        .skeleton.big { height:120px; }\n        @keyframes s { 0%{background-position:-200px 0} 100%{background-position:200px 0} }\n        .two { display:grid; grid-template-columns:1fr 1fr; gap:14px; }\n        @media (max-width: 680px){ .two{ grid-template-columns:1fr; } }\n        .stack { display:flex; flex-direction:column; gap:6px; }\n        .b { font-weight:700; }\n        .bullets { margin:0; padding-right:18px; }\n        .bullets li { margin:4px 0; }\n        .footer { padding:12px 16px; display:flex; justify-content:space-between; align-items:center; }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 287,\n    columnNumber: 5\n  }, this);\n}\n\n/* ===== Hooks ===== */\n_s(Dashboard, \"fz8O5ld5pLBeDT09bjPnkYccSJU=\", false, function () {\n  return [useLiveMinutes];\n});\n_c = Dashboard;\nfunction useLiveMinutes(today) {\n  _s2();\n  const [min, setMin] = useState(0);\n  useEffect(() => {\n    function calc() {\n      if (!today || !today.clockIn) return setMin(0);\n      const start = new Date(today.clockIn).getTime();\n      let now = Date.now();\n      let workingMs = now - start;\n      const breaks = Array.isArray(today.breaks) ? today.breaks : [];\n      for (const b of breaks) {\n        const s = b.start ? new Date(b.start).getTime() : null;\n        const e = b.end ? new Date(b.end).getTime() : null;\n        if (s) {\n          if (e) workingMs -= Math.max(0, e - s);else workingMs -= Math.max(0, now - s);\n        }\n      }\n      setMin(Math.max(0, Math.floor(workingMs / 60000)));\n    }\n    calc();\n    const t = setInterval(calc, 1000);\n    return () => clearInterval(t);\n  }, [today === null || today === void 0 ? void 0 : today.clockIn, JSON.stringify((today === null || today === void 0 ? void 0 : today.breaks) || [])]);\n  return min;\n}\n_s2(useLiveMinutes, \"ngLVQ9bGP+CiLAyWkAZX8U2iXZI=\");\nfunction loadImage(src) {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n    img.src = src;\n  });\n}\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","api","Toast","Modal","jsPDF","XLSX","jsxDEV","_jsxDEV","fmtMin","n","isNaN","h","Math","floor","m","round","todayISO","d","Date","off","getTimezoneOffset","z","getTime","toISOString","slice","getGeo","navigator","Promise","resolve","geolocation","getCurrentPosition","pos","lat","coords","latitude","lng","longitude","enableHighAccuracy","timeout","maximumAge","fileDateStamp","pad","String","padStart","getFullYear","getMonth","getDate","Dashboard","_s","_today$breaks","me","setMe","today","setToday","loadingToday","setLoadingToday","from","setFrom","to","setTo","userId","setUserId","rows","setRows","loadingReport","setLoadingReport","msg","setMsg","confirm","setConfirm","dark","setDark","localStorage","getItem","root","document","documentElement","classList","add","remove","setItem","stop","data","refreshToday","t","res","mine","Array","isArray","length","e","type","title","message","refreshReport","qs","URLSearchParams","set","toString","hasOpenShift","clockIn","clockOut","onBreak","breaks","last","start","end","liveMinutes","useLiveMinutes","doClockIn","body","undefined","method","JSON","stringify","doClockOut","onConfirm","reallyClockOut","startBreak","endBreak","totals","sum","k","reduce","a","r","Number","regularMinutes","overtimeMinutes","totalMinutes","exportCSV","header","lines","join","concat","map","_r$regularMinutes","_r$overtimeMinutes","_r$totalMinutes","date","toLocaleString","blob","Blob","createElement","href","URL","createObjectURL","who","name","download","click","exportExcel","rows2","ClockIn","ClockOut","RegularMinutes","OvertimeMinutes","TotalMinutes","wb","utils","book_new","ws","json_to_sheet","book_append_sheet","writeFile","exportPDF","doc","marginX","lineY","setFontSize","text","setLineWidth","line","img","loadImage","cnv","width","height","ctx","getContext","drawImage","base64","toDataURL","addImage","autoTable","startY","head","styles","font","fontSize","headStyles","fillColor","textColor","margin","left","right","finalY","lastAutoTable","save","setPreset","kind","toLocalISO","x","y","setDate","day","getDay","monday","sunday","first","logout","removeItem","window","location","className","children","onClose","show","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_confirm$onConfirm","call","v","open","role","toLocaleTimeString","src","alt","email","value","onChange","target","_","i","colSpan","disabled","_id","b","_c","_s2","min","setMin","calc","now","workingMs","s","max","setInterval","clearInterval","reject","Image","onload","onerror","$RefreshReg$"],"sources":["C:/Users/user/Desktop/timewatch-clone/client/src/pages/Dashboard.js"],"sourcesContent":["// client/src/pages/Dashboard.js\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { api } from '../api';\nimport Toast from '../components/Toast';\nimport Modal from '../components/Modal';\nimport jsPDF from 'jspdf';\nimport 'jspdf-autotable';\nimport * as XLSX from 'xlsx';\n\n/* ========== Utilities ========== */\nfunction fmtMin(n) {\n  if (n == null || isNaN(n)) return '0ד';\n  const h = Math.floor(n / 60);\n  const m = Math.round(n % 60);\n  return `${h}ש ${m}ד`;\n}\nfunction todayISO() {\n  const d = new Date();\n  const off = d.getTimezoneOffset();\n  const z = new Date(d.getTime() - off * 60000);\n  return z.toISOString().slice(0, 10);\n}\nasync function getGeo() {\n  if (!('geolocation' in navigator)) return null;\n  return new Promise((resolve) => {\n    navigator.geolocation.getCurrentPosition(\n      (pos) => resolve({ lat: pos.coords.latitude, lng: pos.coords.longitude }),\n      () => resolve(null),\n      { enableHighAccuracy: false, timeout: 3000, maximumAge: 60000 }\n    );\n  });\n}\nfunction fileDateStamp(d = new Date()) {\n  const pad = (n) => String(n).padStart(2, '0');\n  return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}`;\n}\n\n/* ========== Component ========== */\nexport default function Dashboard() {\n  const [me, setMe] = useState(null);\n\n  // Today panel\n  const [today, setToday] = useState(null);\n  const [loadingToday, setLoadingToday] = useState(true);\n\n  // Report\n  const [from, setFrom] = useState(todayISO());\n  const [to, setTo] = useState(todayISO());\n  const [userId, setUserId] = useState('');\n  const [rows, setRows] = useState([]);\n  const [loadingReport, setLoadingReport] = useState(false);\n\n  // UI\n  const [msg, setMsg] = useState(null);\n  const [confirm, setConfirm] = useState(null);\n\n  // Dark mode (עצמאי, בלי Tailwind)\n  const [dark, setDark] = useState(() => {\n    try { return localStorage.getItem('tw_dark') === '1'; } catch { return false; }\n  });\n  useEffect(() => {\n    const root = document.documentElement;\n    if (dark) root.classList.add('dark'); else root.classList.remove('dark');\n    try { localStorage.setItem('tw_dark', dark ? '1' : '0'); } catch {}\n  }, [dark]);\n\n  /* ===== Data ===== */\n  useEffect(() => {\n    let stop = false;\n    (async () => {\n      try { const data = await api('/api/auth/me'); if (!stop) setMe(data); } catch {}\n    })();\n    return () => { stop = true; };\n  }, []);\n\n  async function refreshToday() {\n    setLoadingToday(true);\n    try {\n      const t = todayISO();\n      const res = await api(`/api/attendance/report?from=${t}&to=${t}`);\n      const mine = Array.isArray(res) && res.length ? res[0] : null;\n      setToday(mine || null);\n    } catch (e) {\n      setMsg({ type: 'error', title: 'שגיאה', message: e.message });\n    } finally {\n      setLoadingToday(false);\n    }\n  }\n  async function refreshReport() {\n    setLoadingReport(true);\n    try {\n      const qs = new URLSearchParams({ from, to });\n      if (userId) qs.set('userId', userId);\n      const data = await api(`/api/attendance/report?${qs.toString()}`);\n      setRows(Array.isArray(data) ? data : []);\n    } catch (e) {\n      setMsg({ type: 'error', title: 'שגיאה', message: e.message });\n    } finally {\n      setLoadingReport(false);\n    }\n  }\n  useEffect(() => { refreshToday(); }, []);\n  useEffect(() => { refreshReport(); }, [from, to, userId]);\n\n  const hasOpenShift = !!(today && today.clockIn && !today.clockOut);\n  const onBreak = useMemo(() => {\n    if (!today || !today.breaks) return false;\n    const last = today.breaks[today.breaks.length - 1];\n    return !!(last && last.start && !last.end);\n  }, [today]);\n\n  // טיימר חי (סה\"כ נטו)\n  const liveMinutes = useLiveMinutes(today);\n\n  /* ===== Actions ===== */\n  async function doClockIn() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? { coords } : undefined;\n      await api('/api/attendance/clockin', { method: 'POST', body: JSON.stringify(body) });\n      setMsg({ type: 'success', title: 'Clock In בוצע' });\n      await refreshToday(); await refreshReport();\n    } catch (e) { setMsg({ type: 'error', title: 'שגיאה', message: e.message }); }\n  }\n  async function doClockOut() {\n    if (onBreak) {\n      setConfirm({\n        title: 'סגירת משמרת בזמן הפסקה',\n        body: 'יש הפסקה פתוחה. לסגור אותה ולבצע Clock Out?',\n        onConfirm: async () => {\n          try { await api('/api/attendance/break/end', { method: 'POST' }); } catch {}\n          await reallyClockOut();\n        }\n      });\n      return;\n    }\n    await reallyClockOut();\n  }\n  async function reallyClockOut() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? { coords } : undefined;\n      await api('/api/attendance/clockout', { method: 'POST', body: JSON.stringify(body) });\n      setMsg({ type: 'success', title: 'Clock Out בוצע' });\n      await refreshToday(); await refreshReport();\n    } catch (e) { setMsg({ type: 'error', title: 'שגיאה', message: e.message }); }\n  }\n  async function startBreak() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? { coords } : undefined;\n      await api('/api/attendance/break/start', { method: 'POST', body: JSON.stringify(body) });\n      setMsg({ type: 'success', title: 'הפסקה התחילה' });\n      await refreshToday(); await refreshReport();\n    } catch (e) { setMsg({ type: 'error', title: 'שגיאה', message: e.message }); }\n  }\n  async function endBreak() {\n    try {\n      const coords = await getGeo();\n      const body = coords ? { coords } : undefined;\n      await api('/api/attendance/break/end', { method: 'POST', body: JSON.stringify(body) });\n      setMsg({ type: 'success', title: 'הפסקה הסתיימה' });\n      await refreshToday(); await refreshReport();\n    } catch (e) { setMsg({ type: 'error', title: 'שגיאה', message: e.message }); }\n  }\n\n  const totals = useMemo(() => {\n    const sum = (k) => rows.reduce((a, r) => a + (Number(r[k]) || 0), 0);\n    return { regularMinutes: sum('regularMinutes'), overtimeMinutes: sum('overtimeMinutes'), totalMinutes: sum('totalMinutes') };\n  }, [rows]);\n\n  /* ===== Exports ===== */\n  function exportCSV() {\n    const header = ['date', 'clockIn', 'clockOut', 'regularMinutes', 'overtimeMinutes', 'totalMinutes'];\n    const lines = [header.join(',')].concat(\n      rows.map(r => [\n        r.date,\n        r.clockIn ? new Date(r.clockIn).toLocaleString() : '',\n        r.clockOut ? new Date(r.clockOut).toLocaleString() : '',\n        r.regularMinutes ?? 0,\n        r.overtimeMinutes ?? 0,\n        r.totalMinutes ?? 0\n      ].join(','))\n    );\n    const blob = new Blob([lines.join('\\n')], { type: 'text/csv;charset=utf-8' });\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    const who = userId ? `user-${userId}` : (me?.name || 'me');\n    a.download = `Costoro-${who}-${from}_to_${to}.csv`;\n    a.click();\n  }\n  function exportExcel() {\n    const rows2 = rows.map(r => ({\n      Date: r.date,\n      ClockIn: r.clockIn ? new Date(r.clockIn).toLocaleString() : '',\n      ClockOut: r.clockOut ? new Date(r.clockOut).toLocaleString() : '',\n      RegularMinutes: r.regularMinutes || 0,\n      OvertimeMinutes: r.overtimeMinutes || 0,\n      TotalMinutes: r.totalMinutes || 0,\n    }));\n    const wb = XLSX.utils.book_new();\n    const ws = XLSX.utils.json_to_sheet(rows2);\n    XLSX.utils.book_append_sheet(wb, ws, 'Report');\n    const who = userId ? `user-${userId}` : (me?.name || 'me');\n    XLSX.writeFile(wb, `Costoro-${who}-${from}_to_${to}.xlsx`);\n  }\n  async function exportPDF() {\n    const doc = new jsPDF('p', 'pt');\n    const marginX = 36;\n    const lineY = 64;\n\n    doc.setFontSize(16);\n    doc.text('Costoro - Attendance Report', marginX, 30);\n    doc.setFontSize(11);\n    const who = userId ? `User: ${userId}` : (me?.name ? `User: ${me.name}` : 'User: Me');\n    doc.text(`${who}    Range: ${from} → ${to}`, marginX, 46);\n    doc.setLineWidth(0.5);\n    doc.line(marginX, lineY, 559, lineY);\n\n    try {\n      const img = await loadImage('/logo.png');\n      const cnv = document.createElement('canvas');\n      cnv.width = img.width; cnv.height = img.height;\n      const ctx = cnv.getContext('2d');\n      ctx.drawImage(img, 0, 0);\n      const base64 = cnv.toDataURL('image/png');\n      doc.addImage(base64, 'PNG', 500, 16, 56, 56);\n    } catch {}\n\n    const body = rows.map(r => [\n      r.date,\n      r.clockIn ? new Date(r.clockIn).toLocaleString() : '-',\n      r.clockOut ? new Date(r.clockOut).toLocaleString() : '-',\n      fmtMin(r.regularMinutes || 0),\n      fmtMin(r.overtimeMinutes || 0),\n      fmtMin(r.totalMinutes || 0),\n    ]);\n    doc.autoTable({\n      startY: lineY + 16,\n      head: [['תאריך', 'Clock In', 'Clock Out', 'רגיל', 'נוספות', 'סה״כ']],\n      body,\n      styles: { font: 'helvetica', fontSize: 10 },\n      headStyles: { fillColor: [20, 20, 20], textColor: [255, 255, 255] },\n      margin: { left: marginX, right: marginX }\n    });\n    const finalY = doc.lastAutoTable.finalY || (lineY + 16);\n    doc.setFontSize(11);\n    doc.text(`Totals: רגיל ${fmtMin(totals.regularMinutes)}, נוספות ${fmtMin(totals.overtimeMinutes)}, סה״כ ${fmtMin(totals.totalMinutes)}`, marginX, finalY + 24);\n    doc.save(`Costoro-${(me?.name || 'me')}-${fileDateStamp()}.pdf`);\n  }\n\n  /* ===== Presets ===== */\n  function setPreset(kind) {\n    const d = new Date();\n    const toLocalISO = (x) => {\n      const off = x.getTimezoneOffset();\n      const z = new Date(x.getTime() - off * 60000);\n      return z.toISOString().slice(0, 10);\n    };\n    if (kind === 'today') {\n      const t = toLocalISO(new Date()); setFrom(t); setTo(t);\n    } else if (kind === 'yesterday') {\n      const y = new Date(d); y.setDate(d.getDate() - 1);\n      const t = toLocalISO(y); setFrom(t); setTo(t);\n    } else if (kind === 'week') {\n      const day = d.getDay(); // 0..6\n      const monday = new Date(d); const sunday = new Date(d);\n      monday.setDate(d.getDate() - ((day + 6) % 7));\n      sunday.setDate(monday.getDate() + 6);\n      setFrom(toLocalISO(monday)); setTo(toLocalISO(sunday));\n    } else if (kind === 'month') {\n      const first = new Date(d.getFullYear(), d.getMonth(), 1);\n      const last = new Date(d.getFullYear(), d.getMonth() + 1, 0);\n      setFrom(toLocalISO(first)); setTo(toLocalISO(last));\n    }\n  }\n\n  function logout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    localStorage.removeItem('auth');\n    window.location.href = '/login';\n  }\n\n  /* ===== Render ===== */\n  return (\n    <div className=\"page\">\n      <Toast {...(msg || {})} onClose={() => setMsg(null)} show={!!msg} />\n      {confirm && (\n        <Modal title={confirm.title} onClose={() => setConfirm(null)}>\n          <div className=\"space-y\">\n            <p>{confirm.body}</p>\n            <div className=\"row end gap\">\n              <button className=\"btn\" onClick={() => { setConfirm(null); confirm.onConfirm?.(); }}>אישור</button>\n              <button className=\"btn gray\" onClick={() => setConfirm(null)}>ביטול</button>\n            </div>\n          </div>\n        </Modal>\n      )}\n\n      {/* Top bar */}\n      <div className=\"topbar\">\n        <div className=\"row gap\">\n          <button className=\"chip\" onClick={() => setDark(v => !v)}>{dark ? 'מצב בהיר' : 'מצב כהה'}</button>\n          <button className=\"chip\" onClick={() => window.open('/kiosk', '_blank')}>עמדת סריקה (QR)</button>\n          {me?.role === 'admin' && (\n            <button className=\"chip\" onClick={() => (window.location.href = '/admin/users')}>ניהול משתמשים</button>\n          )}\n        </div>\n        <div className=\"row gap\">\n          <div className=\"clock\">{new Date().toLocaleTimeString()}</div>\n          <div className=\"userbox\">\n            <img src=\"/logo.png\" alt=\"Logo\" />\n            <div>\n              <div className=\"name\">שלום {me?.name || '...'}</div>\n              <div className=\"email\">{me?.email || ''}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Grid */}\n      <div className=\"grid\">\n        {/* Report (left) */}\n        <section className=\"card\">\n          <div className=\"card-head\">\n            <h2>דוח לפי תאריכים</h2>\n            <div className=\"row gap\">\n              <a className=\"link\" onClick={exportCSV}>CSV</a>\n              <a className=\"link\" onClick={exportExcel}>Excel</a>\n              <a className=\"link\" onClick={exportPDF}>PDF</a>\n            </div>\n          </div>\n\n          <div className=\"filters\">\n            <div className=\"row gap wrap\">\n              <select className=\"input\" value={userId} onChange={(e) => setUserId(e.target.value)}>\n                <option value=\"\">— כול/ה את עצמי —</option>\n              </select>\n              <input className=\"input\" type=\"date\" value={from} onChange={(e) => setFrom(e.target.value)} />\n              <span>עד</span>\n              <input className=\"input\" type=\"date\" value={to} onChange={(e) => setTo(e.target.value)} />\n              <div className=\"row gap\">\n                <button className=\"chip\" onClick={() => setPreset('today')}>היום</button>\n                <button className=\"chip\" onClick={() => setPreset('yesterday')}>אתמול</button>\n                <button className=\"chip\" onClick={() => setPreset('week')}>השבוע</button>\n                <button className=\"chip\" onClick={() => setPreset('month')}>החודש</button>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"table-wrap\">\n            <table className=\"table\">\n              <thead>\n                <tr>\n                  <th>תאריך</th>\n                  <th>Clock In</th>\n                  <th>Clock Out</th>\n                  <th>רגיל</th>\n                  <th>נוספות</th>\n                  <th>ס״כ</th>\n                  <th></th>\n                </tr>\n              </thead>\n              <tbody>\n                {loadingReport ? (\n                  Array.from({ length: 6 }).map((_, i) => (\n                    <tr key={i}><td colSpan=\"7\"><div className=\"skeleton\"/></td></tr>\n                  ))\n                ) : (\n                  rows.map((r) => (\n                    <tr key={r._id || r.date}>\n                      <td>{r.date}</td>\n                      <td>{r.clockIn ? new Date(r.clockIn).toLocaleTimeString() : '-'}</td>\n                      <td>{r.clockOut ? new Date(r.clockOut).toLocaleTimeString() : '-'}</td>\n                      <td>{fmtMin(r.regularMinutes || 0)}</td>\n                      <td>{fmtMin(r.overtimeMinutes || 0)}</td>\n                      <td>{fmtMin(r.totalMinutes || 0)}</td>\n                      <td><button className=\"btn tiny\" disabled>ערוך</button></td>\n                    </tr>\n                  ))\n                )}\n              </tbody>\n              {!loadingReport && (\n                <tfoot>\n                  <tr>\n                    <td>סיכום</td>\n                    <td></td><td></td>\n                    <td>{fmtMin(totals.regularMinutes)}</td>\n                    <td>{fmtMin(totals.overtimeMinutes)}</td>\n                    <td>{fmtMin(totals.totalMinutes)}</td>\n                    <td></td>\n                  </tr>\n                </tfoot>\n              )}\n            </table>\n          </div>\n        </section>\n\n        {/* Today (right) */}\n        <section className=\"card\">\n          <div className=\"card-head\">\n            <h2>היום</h2>\n            <div className=\"muted\">{today ? today.date : todayISO()}</div>\n          </div>\n\n          <div className=\"row gap wrap end mb\">\n            <button className=\"btn\" disabled={hasOpenShift} onClick={doClockIn}>Clock In</button>\n            <button className=\"btn gray\" disabled={!hasOpenShift || onBreak} onClick={startBreak}>Start Break</button>\n            <button className=\"btn gray\" disabled={!onBreak} onClick={endBreak}>End Break</button>\n            <button className=\"btn gray\" disabled={!hasOpenShift} onClick={doClockOut}>Clock Out</button>\n          </div>\n\n          {loadingToday ? (\n            <div className=\"skeleton big\" />\n          ) : !today ? (\n            <div className=\"muted\">לא במשמרת</div>\n          ) : (\n            <div className=\"two\">\n              <div className=\"stack\">\n                <div><b>Clock In:</b> {today.clockIn ? new Date(today.clockIn).toLocaleTimeString() : '-'}</div>\n                <div><b>Clock Out:</b> {today.clockOut ? new Date(today.clockOut).toLocaleTimeString() : '-'}</div>\n                <div><b>סה״כ (חי):</b> {fmtMin(liveMinutes)}</div>\n                <div><b>רגיל:</b> {fmtMin(today.regularMinutes || 0)}</div>\n                <div><b>נוספות:</b> {fmtMin(today.overtimeMinutes || 0)}</div>\n              </div>\n              <div className=\"stack\">\n                <div className=\"b\">הפסקות:</div>\n                <ul className=\"bullets\">\n                  {(today.breaks || []).map((b, i) => (\n                    <li key={i}>\n                      {b.start ? new Date(b.start).toLocaleTimeString() : '-'} → {b.end ? new Date(b.end).toLocaleTimeString() : '—'}\n                    </li>\n                  ))}\n                  {!today.breaks?.length && <li>—</li>}\n                </ul>\n              </div>\n            </div>\n          )}\n        </section>\n      </div>\n\n      <div className=\"footer\">\n        <button className=\"btn gray\" onClick={logout}>התנתק</button>\n        <div className=\"muted\">Costoro {new Date().getFullYear()} ©</div>\n      </div>\n\n      {/* ===== Local Styles (RTL + Dark) ===== */}\n      <style>{`\n        :root { --bg:#f4f7fb; --fg:#0f172a; --muted:#6b7280; --card:#ffffff; --border:#e5e7eb; --chip:#eef2f7; --chip-fg:#0f172a; --accent:#111; }\n        .dark:root { --bg:#0f172a; --fg:#e5e7eb; --muted:#93a1b5; --card:#111827; --border:#273043; --chip:#1f2937; --chip-fg:#e5e7eb; --accent:#f8fafc; }\n        html, body, #root { height:100%; }\n        body { background:var(--bg); color:var(--fg); }\n        .page { min-height:100vh; display:flex; flex-direction:column; gap:16px; }\n        .topbar { display:flex; justify-content:space-between; align-items:center; padding:14px 16px; }\n        .row { display:flex; align-items:center; }\n        .row.end { justify-content:flex-end; }\n        .row.wrap { flex-wrap:wrap; }\n        .gap { gap:10px; }\n        .mb { margin-bottom:10px; }\n        .clock { background:#000; color:#fff; border-radius:999px; padding:4px 10px; font-size:12px; }\n        .userbox { display:flex; gap:10px; align-items:center; }\n        .userbox img { width:32px; height:32px; border-radius:6px; }\n        .userbox .name { font-weight:700; font-size:14px; }\n        .userbox .email { font-size:12px; color:var(--muted); }\n        .chip { background:var(--chip); color:var(--chip-fg); border:1px solid var(--border); border-radius:10px; padding:6px 10px; font-size:13px; }\n        .grid { display:grid; grid-template-columns:1fr 1fr; gap:16px; padding:0 16px 20px; }\n        @media (max-width: 1024px){ .grid{ grid-template-columns:1fr; } }\n        .card { background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:0 1px 2px rgba(0,0,0,.03); padding:14px; }\n        .card-head { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }\n        .card-head h2 { margin:0; font-size:18px; }\n        .muted { color:var(--muted); font-size:13px; }\n        .filters { padding:8px 0; border-top:1px solid var(--border); border-bottom:1px solid var(--border); margin-bottom:10px; }\n        .input { border:1px solid var(--border); background:transparent; color:var(--fg); border-radius:10px; padding:6px 10px; font-size:14px; }\n        .btn { background:#111; color:#fff; border:none; border-radius:10px; padding:8px 14px; font-weight:600; }\n        .btn.gray { background:var(--chip); color:var(--chip-fg); border:1px solid var(--border); }\n        .btn.tiny { padding:4px 8px; font-size:12px; }\n        .btn[disabled]{ opacity:.45; cursor:not-allowed; }\n        .link { text-decoration:underline; cursor:pointer; }\n        .table-wrap { max-height:480px; overflow:auto; border:1px solid var(--border); border-radius:10px; }\n        .table { width:100%; border-collapse:separate; border-spacing:0; direction:rtl; }\n        .table thead th { position:sticky; top:0; background:var(--chip); color:var(--chip-fg); text-align:right; padding:10px; border-bottom:1px solid var(--border); font-weight:700; }\n        .table tbody td { padding:10px; border-bottom:1px solid var(--border); }\n        .table tbody tr:nth-child(even){ background:rgba(0,0,0,.02); }\n        .table tfoot td { padding:10px; background:var(--chip); color:var(--chip-fg); font-weight:700; position:sticky; bottom:0; }\n        .skeleton { height:36px; background:linear-gradient(90deg, rgba(0,0,0,.06), rgba(0,0,0,.02), rgba(0,0,0,.06)); animation:s 1.4s infinite; border-radius:8px; }\n        .skeleton.big { height:120px; }\n        @keyframes s { 0%{background-position:-200px 0} 100%{background-position:200px 0} }\n        .two { display:grid; grid-template-columns:1fr 1fr; gap:14px; }\n        @media (max-width: 680px){ .two{ grid-template-columns:1fr; } }\n        .stack { display:flex; flex-direction:column; gap:6px; }\n        .b { font-weight:700; }\n        .bullets { margin:0; padding-right:18px; }\n        .bullets li { margin:4px 0; }\n        .footer { padding:12px 16px; display:flex; justify-content:space-between; align-items:center; }\n      `}</style>\n    </div>\n  );\n}\n\n/* ===== Hooks ===== */\nfunction useLiveMinutes(today) {\n  const [min, setMin] = useState(0);\n  useEffect(() => {\n    function calc() {\n      if (!today || !today.clockIn) return setMin(0);\n      const start = new Date(today.clockIn).getTime();\n      let now = Date.now();\n      let workingMs = now - start;\n      const breaks = Array.isArray(today.breaks) ? today.breaks : [];\n      for (const b of breaks) {\n        const s = b.start ? new Date(b.start).getTime() : null;\n        const e = b.end ? new Date(b.end).getTime() : null;\n        if (s) {\n          if (e) workingMs -= Math.max(0, e - s);\n          else workingMs -= Math.max(0, now - s);\n        }\n      }\n      setMin(Math.max(0, Math.floor(workingMs / 60000)));\n    }\n    calc();\n    const t = setInterval(calc, 1000);\n    return () => clearInterval(t);\n  }, [today?.clockIn, JSON.stringify(today?.breaks || [])]);\n  return min;\n}\n\nfunction loadImage(src) {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n    img.src = src;\n  });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}